import{j as e,B as f,a as E,C as A}from"./index-210cb10d.js";import{r as M}from"./dndkit-fdc06b07.js";import"./fa-8ab3eb90.js";import"./lucide-a8a5326a.js";const D=({label:r,values:t=[],placeholder:h="",onChange:p,onRemove:c,onAdd:u})=>e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:r}),t.map((n,x)=>e.jsxs("div",{className:"array-input-row",children:[e.jsx("input",{type:"text",value:n,onChange:d=>p&&p(x,d.target.value),placeholder:h,className:"form-input"}),e.jsx(f,{action:"delete",onClick:()=>c&&c(x),size:"sm",title:"Remove"})]},x)),e.jsxs(f,{action:"add",onClick:()=>u&&u(),size:"sm",title:`Add ${r}`,children:["Add ",r]})]}),w=({tier:r,typeValue:t,difficulty:h,onTierChange:p,onTypeChange:c,onDifficultyChange:u})=>e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"Details"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"tier",children:"Tier"}),e.jsx("select",{id:"tier",value:r,onChange:n=>p(parseInt(n.target.value)),className:"form-select",children:[1,2,3,4,5].map(n=>e.jsxs("option",{value:n,children:["Tier ",n]},n))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"type",children:"Type"}),e.jsx("input",{id:"type",type:"text",value:t,onChange:n=>c(n.target.value),placeholder:"e.g., Beast, Humanoid, Undead",className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"difficulty",children:"Difficulty"}),e.jsx("select",{id:"difficulty",value:h,onChange:n=>u(parseInt(n.target.value)),className:"form-select",children:[1,2,3,4,5].map(n=>e.jsxs("option",{value:n,children:["Difficulty ",n]},n))})]})]})]}),T=({name:r,description:t,max:h,countdownType:p,loop:c,onNameChange:u,onDescriptionChange:n,onMaxChange:x,onTypeChange:d,onLoopChange:s})=>e.jsx("div",{className:"form-section countdown-compact",children:e.jsxs("div",{className:"countdown-stack",children:[e.jsx("input",{type:"text",value:r,onChange:i=>u(i.target.value),placeholder:"Countdown name",className:"form-input",required:!0}),e.jsx("input",{type:"text",value:t,onChange:i=>n(i.target.value),placeholder:"Description (optional)",className:"form-input"}),e.jsxs("div",{className:"countdown-row",children:[e.jsx("input",{type:"number",inputMode:"numeric",enterKeyHint:"done",min:"1",max:"20",value:h,onChange:i=>x(parseInt(i.target.value)),placeholder:"Max value",className:"form-input"}),e.jsxs("select",{value:p,onChange:i=>d(i.target.value),className:"form-input",children:[e.jsx("option",{value:"standard",children:"Standard"}),e.jsx("option",{value:"progress",children:"Progress"}),e.jsx("option",{value:"consequence",children:"Consequence"}),e.jsx("option",{value:"long-term",children:"Long-term"}),e.jsx("option",{value:"simple-fear",children:"Simple Fear"}),e.jsx("option",{value:"simple-hope",children:"Simple Hope"})]}),e.jsxs("select",{value:c,onChange:i=>s(i.target.value),className:"form-input",children:[e.jsx("option",{value:"none",children:"None"}),e.jsx("option",{value:"loop",children:"Loop"}),e.jsx("option",{value:"increasing",children:"Increasing"}),e.jsx("option",{value:"decreasing",children:"Decreasing"})]}),e.jsx(f,{action:"save",type:"submit",size:"md",children:"Create"})]})]})}),H=({hpMax:r,stressMax:t,onHpMaxChange:h,onStressMaxChange:p})=>e.jsxs("div",{className:"stats-section",children:[e.jsx("h3",{children:"Combat Stats"}),e.jsxs("div",{className:"stat-row",children:[e.jsx("span",{className:"stat-label",children:"Max HP:"}),e.jsx("input",{type:"number",inputMode:"numeric",enterKeyHint:"done",min:"1",value:r,onChange:c=>h(parseInt(c.target.value)||1),className:"form-input"})]}),e.jsxs("div",{className:"stat-row",children:[e.jsx("span",{className:"stat-label",children:"Max Stress:"}),e.jsx("input",{type:"number",inputMode:"numeric",enterKeyHint:"done",min:"0",value:t,onChange:c=>p(parseInt(c.target.value)||0),className:"form-input"})]})]}),S=({effects:r,hazards:t,onEffectChange:h,onAddEffect:p,onRemoveEffect:c,onHazardChange:u,onAddHazard:n,onRemoveHazard:x})=>e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"Environment Effects"}),e.jsxs("div",{className:"effects-section",children:[e.jsx("h4",{children:"Effects"}),r.map((d,s)=>e.jsxs("div",{className:"array-input-row",children:[e.jsx("input",{type:"text",value:d,onChange:i=>h(s,i.target.value),placeholder:"Describe environmental effect",className:"form-input"}),e.jsx(f,{action:"delete",onClick:()=>c(s),size:"sm",title:"Remove"})]},s)),e.jsx(f,{action:"add",onClick:p,size:"sm",title:"Add Effect",children:"Add Effect"})]}),e.jsxs("div",{className:"hazards-section",children:[e.jsx("h4",{children:"Hazards"}),t.map((d,s)=>e.jsxs("div",{className:"array-input-row",children:[e.jsx("input",{type:"text",value:d,onChange:i=>u(s,i.target.value),placeholder:"Describe environmental hazard",className:"form-input"}),e.jsx(f,{action:"delete",onClick:()=>x(s),size:"sm",title:"Remove"})]},s)),e.jsx(f,{action:"add",onClick:n,size:"sm",title:"Add Hazard",children:"Add Hazard"})]})]}),L=({type:r,item:t=null,source:h="campaign",onSave:p,onCancel:c})=>{const u=!!t,n=r==="adversary",x=r==="environment",d=r==="countdown",[s,i]=M.useState({name:"",tier:1,type:"",difficulty:1,source:h,hpMax:1,stressMax:0,abilities:[],traits:[],effects:[],hazards:[],max:5,value:0,countdownType:"standard",loop:"none"});M.useEffect(()=>{t&&i({name:t.name||"",tier:t.tier||1,type:t.type||"",difficulty:t.difficulty||1,source:t.source||h,hpMax:t.hpMax||1,stressMax:t.stressMax||0,abilities:t.abilities||[],traits:t.traits||[],effects:t.effects||[],hazards:t.hazards||[],max:t.max||5,value:t.value||0,countdownType:t.type||"standard",loop:t.loop||"none"})},[t,h]);const m=(a,o)=>{i(l=>({...l,[a]:o}))},g=(a,o,l)=>{i(v=>({...v,[a]:v[a].map((j,b)=>b===o?l:j)}))},y=a=>{i(o=>({...o,[a]:[...o[a],""]}))},C=(a,o)=>{i(l=>({...l,[a]:l[a].filter((v,j)=>j!==o)}))},N=a=>{if(a.preventDefault(),!s.name.trim()){alert("Name is required");return}const o={...s,name:s.name.trim(),...n&&{hp:0,hpMax:s.hpMax,stress:0,stressMax:s.stressMax,abilities:s.abilities.filter(l=>l.trim()),traits:s.traits.filter(l=>l.trim())},...x&&{effects:s.effects.filter(l=>l.trim()),hazards:s.hazards.filter(l=>l.trim())},...d&&{max:s.max,value:s.value,type:s.countdownType,loop:s.loop}};p(o)},z=(a,o,l)=>e.jsx(D,{label:o,values:s[a],placeholder:l,onChange:(v,j)=>g(a,v,j),onRemove:v=>C(a,v),onAdd:()=>y(a)});return e.jsxs("div",{className:"creator-container",children:[e.jsx("div",{className:"creator-header",children:!d&&e.jsxs(e.Fragment,{children:[e.jsxs("h2",{children:[u?"Edit":"Create"," ",r==="adversary"?"Adversary":"Environment"]}),e.jsx("div",{className:"creator-actions",children:e.jsx(f,{action:"cancel",onClick:c,size:"sm",children:"Cancel"})})]})}),e.jsx("form",{onSubmit:N,className:"creator-form",children:e.jsxs(E,{item:t,type:r,editData:s,onChange:m,onSave:N,onCancel:c,showMetaDetails:!d,children:[d&&e.jsx(T,{name:s.name,description:s.description,max:s.max,countdownType:s.countdownType,loop:s.loop,onNameChange:a=>m("name",a),onDescriptionChange:a=>m("description",a),onMaxChange:a=>m("max",a),onTypeChange:a=>m("countdownType",a),onLoopChange:a=>m("loop",a)}),n&&e.jsxs(e.Fragment,{children:[e.jsx(w,{tier:s.tier,typeValue:s.type,difficulty:s.difficulty,onTierChange:a=>m("tier",a),onTypeChange:a=>m("type",a),onDifficultyChange:a=>m("difficulty",a)}),e.jsx(H,{hpMax:s.hpMax,stressMax:s.stressMax,onHpMaxChange:a=>m("hpMax",a),onStressMaxChange:a=>m("stressMax",a)}),z("abilities","Abilities","Enter ability description"),z("traits","Traits","Enter trait description")]}),x&&e.jsxs(e.Fragment,{children:[e.jsx(w,{tier:s.tier,typeValue:s.type,difficulty:s.difficulty,onTierChange:a=>m("tier",a),onTypeChange:a=>m("type",a),onDifficultyChange:a=>m("difficulty",a)}),e.jsx(S,{effects:s.effects,hazards:s.hazards,onEffectChange:(a,o)=>g("effects",a,o),onAddEffect:()=>y("effects"),onRemoveEffect:a=>C("effects",a),onHazardChange:(a,o)=>g("hazards",a,o),onAddHazard:()=>y("hazards"),onRemoveHazard:a=>C("hazards",a)})]}),!d&&e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"Preview"}),e.jsx("div",{className:"preview-card",children:e.jsx(A,{item:s,type:r,mode:"compact",preview:!0})})]}),!d&&e.jsx("div",{className:"form-actions",children:e.jsxs(f,{action:"save",type:"submit",size:"lg",children:[u?"Update":"Create"," ",r==="adversary"?"Adversary":"Environment"]})})]})})]})};export{L as default};
