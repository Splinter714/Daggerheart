import{r as w,a as pe,R as ee}from"./dndkit-57209f9c.js";import{F as Ae,f as ze,a as Te,b as Be,c as he}from"./fa-b4bcccb0.js";import{D as Q,A as Ce,C as Me,T as Le,S as Re,M as De,X as oe,E as Pe,H as ae,L as Ne,a as He,b as Fe,F as Oe,c as te,d as re,e as le,P as de}from"./lucide-7a0c9f84.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))j(m);new MutationObserver(m=>{for(const p of m)if(p.type==="childList")for(const h of p.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&j(h)}).observe(document,{childList:!0,subtree:!0});function x(m){const p={};return m.integrity&&(p.integrity=m.integrity),m.referrerPolicy&&(p.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?p.credentials="include":m.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function j(m){if(m.ep)return;m.ep=!0;const p=x(m);fetch(m.href,p)}})();var Se={exports:{}},ie={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qe=w,$e=Symbol.for("react.element"),Ve=Symbol.for("react.fragment"),_e=Object.prototype.hasOwnProperty,Ge=qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xe={key:!0,ref:!0,__self:!0,__source:!0};function ke(t,s,x){var j,m={},p=null,h=null;x!==void 0&&(p=""+x),s.key!==void 0&&(p=""+s.key),s.ref!==void 0&&(h=s.ref);for(j in s)_e.call(s,j)&&!Xe.hasOwnProperty(j)&&(m[j]=s[j]);if(t&&t.defaultProps)for(j in s=t.defaultProps,s)m[j]===void 0&&(m[j]=s[j]);return{$$typeof:$e,type:t,key:p,ref:h,props:m,_owner:Ge.current}}ie.Fragment=Ve;ie.jsx=ke;ie.jsxs=ke;Se.exports=ie;var e=Se.exports,xe={},ge=pe;xe.createRoot=ge.createRoot,xe.hydrateRoot=ge.hydrateRoot;function ne(t){const s=typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,10)}`;return t?`${t}-${s}`:s}const Ee=w.createContext();function Ye(t){if(typeof localStorage>"u")return null;try{const s=localStorage.getItem(t);return s==null?null:JSON.parse(s)}catch{return null}}function Ue(t,s){if(!(typeof localStorage>"u"))try{localStorage.setItem(t,JSON.stringify(s))}catch{}}const Ke=({children:t})=>{const[s,x]=w.useState({fear:{value:0,visible:!1},countdowns:[],adversaries:[],environments:[]}),[j,m]=w.useState(!1);w.useEffect(()=>{var o,i,n;const a=Ye("daggerheart-game-state");if(a)try{(((o=a.adversaries)==null?void 0:o.length)>0||((i=a.environments)==null?void 0:i.length)>0||((n=a.countdowns)==null?void 0:n.length)>0)&&x(a)}catch(r){console.error("Failed to load saved state:",r)}m(!0)},[]),w.useEffect(()=>{Ue("daggerheart-game-state",s)},[s]);const p=a=>{x(o=>({...o,fear:{...o.fear,value:a}}))},h=()=>{x(a=>({...a,fear:{...a.fear,visible:!a.fear.visible}}))},u=w.useRef(s);w.useEffect(()=>{u.current=s},[s]);const l={gameState:s,isLoaded:j,updateFear:p,toggleFearVisibility:h,createCountdown:a=>{const o={id:ne("countdown"),name:a.name||"Countdown",max:parseInt(a.max)||1,value:0,visible:!0,type:a.type||"standard",loop:a.loop||"none",source:a.source||"campaign"};x(i=>({...i,countdowns:[...i.countdowns,o]}))},updateCountdown:(a,o)=>{x(i=>({...i,countdowns:i.countdowns.map(n=>n.id===a?{...n,...o}:n)}))},deleteCountdown:a=>{x(o=>({...o,countdowns:o.countdowns.filter(i=>i.id!==a)}))},advanceCountdown:(a,o)=>{x(i=>({...i,countdowns:i.countdowns.map(n=>{if(n.id!==a)return n;let r=o;if(n.loop==="loop")r>n.max?r=(r-1)%n.max+1:r<0&&(r=n.max);else if(n.loop==="increasing"){if(r>n.max)return{...n,max:n.max+1,value:1};if(r<0)return{...n,max:Math.max(1,n.max-1),value:1};r=Math.max(0,r)}else if(n.loop==="decreasing"){if(r>n.max)return{...n,max:Math.max(1,n.max-1),value:1};if(r<0)return{...n,max:n.max+1,value:1};r=Math.min(n.max,r)}else r=Math.max(0,Math.min(r,n.max));return{...n,value:r}})}))},incrementCountdown:(a,o=1)=>{x(i=>({...i,countdowns:i.countdowns.map(n=>{if(n.id!==a)return n;let r=n.value+o;if(n.loop==="loop")r>n.max&&(r=(r-1)%n.max+1);else if(n.loop==="increasing"){if(r>n.max)return{...n,max:n.max+1,value:1}}else if(n.loop==="decreasing"){if(r>n.max)return{...n,max:Math.max(1,n.max-1),value:1}}else r=Math.min(r,n.max);return{...n,value:r}})}))},decrementCountdown:a=>{x(o=>({...o,countdowns:o.countdowns.map(i=>{if(i.id!==a)return i;let n=i.value-1;if(i.loop==="loop")n<0&&(n=i.max);else if(i.loop==="increasing"){if(n<0)return{...i,max:Math.max(1,i.max-1),value:i.max};n=Math.max(0,n)}else if(i.loop==="decreasing"){if(n<0)return{...i,max:i.max+1,value:1}}else n=Math.max(0,n);return{...i,value:n}})}))},reorderCountdowns:a=>{x(o=>{const[i,n]=a,r=[...o.countdowns],[d]=r.splice(i,1);return r.splice(n,0,d),{...o,countdowns:r}})},createAdversary:a=>{var y;const o=ne("adv"),i=s.adversaries||[],n=a.baseName||((y=a.name)==null?void 0:y.replace(/\s+\(\d+\)$/,""))||a.name||"Unknown",r=i.filter(C=>C.baseName===n);let d=1;if(r.length===0)d=1;else{const C=r.map($=>$.duplicateNumber||1);let I=1;for(;C.includes(I);)I++;d=I}const c={...a,id:o,baseName:n,duplicateNumber:d,name:`${n} (${d})`,hp:0,stress:0,isVisible:!0};x(C=>({...C,adversaries:[...C.adversaries,c]}))},createAdversariesBulk:a=>{const o=[],i={};a.forEach(n=>{var H;const r=n.baseName||((H=n.name)==null?void 0:H.replace(/\s+\(\d+\)$/,""))||n.name||"Unknown",y=(s.adversaries||[]).filter(R=>R.baseName===r).length,C=i[r]||0,I=y+C+1;i[r]=C+1;const $={...n,id:ne("adv"),baseName:r,duplicateNumber:I,name:`${r} (${I})`,hp:0,stress:0,isVisible:!0};o.push($)}),x(n=>({...n,adversaries:[...n.adversaries,...o]}))},updateAdversary:(a,o)=>{x(i=>({...i,adversaries:i.adversaries.map(n=>{if(n.id===a){const r={...n,...o};if(o.baseName!==void 0){const d=o.baseName,c=r.duplicateNumber||1;r.name=c===1?d:`${d} (${c})`}return r}return n})}))},deleteAdversary:a=>{x(o=>({...o,adversaries:o.adversaries.filter(i=>i.id!==a)}))},reorderAdversaries:a=>{x(o=>{const[i,n]=a,r=[...o.adversaries],[d]=r.splice(i,1);return r.splice(n,0,d),{...o,adversaries:r}})},bulkReorderAdversaries:a=>{x(o=>({...o,adversaries:a}))},createEnvironment:a=>{const o=ne("env"),n=(s.environments||[]).filter(c=>c.name.replace(/\s+\(\d+\)$/,"")===a.name);let r=a.name||"Unknown";if(n.length===0)r=a.name;else if(n.length===1){const c=n[0],y=c.name.replace(/\s+\(\d+\)$/,""),C=s.environments.map(I=>I.id===c.id?{...I,name:`${y} (1)`}:I);x(I=>({...I,environments:C})),r=`${a.name} (2)`}else{const c=n.map(C=>{const I=C.name.match(/\((\d+)\)$/);return I?parseInt(I[1]):null}).filter(C=>C!==null);let y=1;for(;c.includes(y);)y++;r=`${a.name} (${y})`}const d={...a,id:o,name:r,isVisible:!0};x(c=>({...c,environments:[...c.environments,d]}))},updateEnvironment:(a,o)=>{x(i=>({...i,environments:i.environments.map(n=>n.id===a?{...n,...o}:n)}))},deleteEnvironment:a=>{x(o=>({...o,environments:o.environments.filter(i=>i.id!==a)}))},reorderEnvironments:a=>{x(o=>{const[i,n]=a,r=[...o.environments],[d]=r.splice(i,1);return r.splice(n,0,d),{...o,environments:r}})}};return e.jsx(Ee.Provider,{value:l,children:t})},Je=()=>{const t=w.useContext(Ee);if(!t)return console.warn("useGameState: Context not available yet, returning defaults"),{fear:{value:0,visible:!1},countdowns:[],adversaries:[],environments:[],updateFear:()=>{},toggleFearVisibility:()=>{},createCountdown:()=>{},updateCountdown:()=>{},deleteCountdown:()=>{},advanceCountdown:()=>{},incrementCountdown:()=>{},decrementCountdown:()=>{},reorderCountdowns:()=>{},createAdversary:()=>{},updateAdversary:()=>{},deleteAdversary:()=>{},reorderAdversaries:()=>{},createEnvironment:()=>{},updateEnvironment:()=>{},deleteEnvironment:()=>{},reorderEnvironments:()=>{},hasCountdowns:!1,hasAdversaries:!1,hasEnvironments:!1,getCountdownById:()=>null,getAdversaryById:()=>null,getEnvironmentById:()=>null};const{gameState:s,...x}=t;if(!s)return console.warn("useGameState: gameState not available, returning defaults"),{fear:{value:0,visible:!1},countdowns:[],adversaries:[],environments:[],updateFear:()=>{},toggleFearVisibility:()=>{},createCountdown:()=>{},updateCountdown:()=>{},deleteCountdown:()=>{},advanceCountdown:()=>{},incrementCountdown:()=>{},decrementCountdown:()=>{},reorderCountdowns:()=>{},createAdversary:()=>{},updateAdversary:()=>{},deleteAdversary:()=>{},reorderAdversaries:()=>{},createEnvironment:()=>{},updateEnvironment:()=>{},deleteEnvironment:()=>{},reorderEnvironments:()=>{},hasCountdowns:!1,hasAdversaries:!1,hasEnvironments:!1,getCountdownById:()=>null,getAdversaryById:()=>null,getEnvironmentById:()=>null};const{fear:j,countdowns:m,adversaries:p,environments:h}=s;return{gameState:s,fear:j,countdowns:m,adversaries:p,environments:h,...x,hasCountdowns:m.length>0,hasAdversaries:p.length>0,hasEnvironments:h.length>0,getCountdownById:u=>m.find(v=>v.id===u),getAdversaryById:u=>p.find(v=>v.id===u),getEnvironmentById:u=>h.find(v=>v.id===u)}},ye={fear:{icon:ze,maxValue:12,containerStyle:{display:"flex",gap:"0.125rem",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",padding:"0.125rem",maxWidth:"none"},pipStyle:{fontSize:"var(--text-lg)",fontWeight:600,transition:"color 0.3s ease",height:"1.5rem",width:"1.5rem",display:"inline-block",textAlign:"center",lineHeight:"1.5rem",flexShrink:0,imageRendering:"crisp-edges"},filledColor:"var(--purple)",emptyColor:"var(--gray-dark)",tooltipTitle:"Click anywhere in header to adjust fear:",tooltipInstructions:[{text:"Left of boundary:",description:"Click to decrease fear by 1"},{text:"Right of boundary:",description:"Click to increase fear by 1"}]},hp:{icon:Te,maxValue:20,containerStyle:{display:"inline-block",width:"auto",height:"100%",padding:"0.125rem",textAlign:"center"},pipStyle:{fontSize:"var(--text-sm)",fontWeight:600,transition:"color 0.3s ease",height:"1.5rem",width:"1.5rem",display:"inline-block",textAlign:"center",lineHeight:"1.5rem",flexShrink:0},filledColor:"var(--red)",emptyColor:"var(--text-secondary)",tooltipTitle:"Click anywhere to adjust HP:",tooltipInstructions:[{text:"Left of boundary:",description:"Click to decrease HP by 1"},{text:"Right of boundary:",description:"Click to increase HP by 1"}]},stress:{icon:Be,maxValue:12,containerStyle:{display:"inline-block",width:"auto",height:"100%",padding:"0.125rem",textAlign:"center"},pipStyle:{fontSize:"var(--text-sm)",fontWeight:600,transition:"color 0.3s ease",height:"1.5rem",width:"1.5rem",display:"inline-block",textAlign:"center",lineHeight:"1.5rem",flexShrink:0},filledColor:"var(--gold)",emptyColor:"var(--text-secondary)",tooltipTitle:"Click anywhere to adjust stress:",tooltipInstructions:[{text:"Left of boundary:",description:"Click to decrease stress by 1"},{text:"Right of boundary:",description:"Click to increase stress by 1"}]},countdown:{icon:he,maxValue:6,containerStyle:{display:"inline-block",width:"auto",height:"100%",padding:"0.125rem",textAlign:"center"},pipStyle:{fontSize:"var(--text-sm)",fontWeight:600,transition:"color 0.3s ease",height:"1.5rem",width:"1.5rem",display:"inline-block",textAlign:"center",lineHeight:"1.5rem",flexShrink:0},filledColor:"var(--text-secondary)",emptyColor:"var(--text-secondary)",tooltipTitle:"Click anywhere to adjust countdown:",tooltipInstructions:[{text:"Left of boundary:",description:"Click to decrease countdown by 1"},{text:"Right of boundary:",description:"Click to increase countdown by 1"}]},hpDots:{maxValue:20,containerStyle:{display:"flex",flexWrap:"wrap",gap:"1px",justifyContent:"center",alignItems:"center",maxWidth:"120px"},pipStyle:{width:"8px",height:"8px",borderRadius:"50%",border:"1px solid var(--border)",transition:"background-color 0.5s ease, border-color 0.5s ease, box-shadow 0.5s ease"},filledStyle:{background:"var(--red)",borderColor:"var(--red)",boxShadow:"0 0 4px rgba(239, 68, 68, 0.5)"},emptyStyle:{background:"var(--bg-primary)",borderColor:"var(--border)"},isDots:!0,tooltipTitle:"Click anywhere to adjust HP:",tooltipInstructions:[{text:"Left of boundary:",description:"Click to decrease HP by 1"},{text:"Right of boundary:",description:"Click to increase HP by 1"}]},stressDots:{maxValue:12,containerStyle:{display:"flex",flexWrap:"wrap",gap:"1px",justifyContent:"center",alignItems:"center",maxWidth:"120px"},pipStyle:{width:"8px",height:"8px",borderRadius:"50%",border:"1px solid var(--border)",transition:"background-color 0.5s ease, border-color 0.5s ease, box-shadow 0.5s ease"},filledStyle:{background:"var(--purple)",borderColor:"var(--purple)",boxShadow:"0 0 4px rgba(139, 92, 246, 0.5)"},emptyStyle:{background:"var(--bg-primary)",borderColor:"var(--border)"},isDots:!0,tooltipTitle:"Click anywhere to adjust stress:",tooltipInstructions:[{text:"Left of boundary:",description:"Click to decrease stress by 1"},{text:"Right of boundary:",description:"Click to increase stress by 1"}]},adversaryHP:{icon:Q,maxValue:20,containerStyle:{display:"flex",gap:"0px",flexWrap:"wrap",alignContent:"flex-start",rowGap:"0.03125rem",maxWidth:"100%"},pipStyle:{fontSize:"var(--text-sm)",fontWeight:600,transition:"none",cursor:"pointer",width:"1rem",height:"1rem",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},filledColor:"var(--red)",emptyColor:"var(--gray-400)",tooltipTitle:"Click to adjust HP:",tooltipInstructions:[{text:"Filled pip:",description:"Click to heal (reduce damage)"},{text:"Empty pip:",description:"Click to take damage"}]},adversaryStress:{icon:Ce,maxValue:12,containerStyle:{display:"flex",gap:"0px",flexWrap:"wrap",alignContent:"flex-start",rowGap:"0.03125rem",maxWidth:"100%"},pipStyle:{fontSize:"var(--text-sm)",fontWeight:600,transition:"none",cursor:"pointer",width:"1rem",height:"1rem",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},filledColor:"var(--gold)",emptyColor:"var(--gray-400)",tooltipTitle:"Click to adjust stress:",tooltipInstructions:[{text:"Filled pip:",description:"Click to reduce stress"},{text:"Empty pip:",description:"Click to increase stress"}]},countdownDistributed:{icon:he,maxValue:6,containerStyle:{display:"inline-block",width:"auto",height:"100%",padding:"0.125rem",textAlign:"center"},pipStyle:{fontSize:"var(--text-sm)",fontWeight:600,transition:"color 0.3s ease",height:"1.5rem",width:"1.5rem",display:"inline-block",textAlign:"center",lineHeight:"1.5rem",flexShrink:0},filledColor:"var(--text-secondary)",emptyColor:"var(--text-secondary)",tooltipTitle:"Countdown progress:",tooltipInstructions:[{text:"Progress:",description:"Current countdown value"}]}},Qe=({type:t="fear",value:s=0,maxValue:x,onChange:j,size:m="lg",showTooltip:p=!0,containerStyle:h={},pipStyle:u={},countdownType:v=null,distributedGroups:W=null,onPipClick:k=null,enableBoundaryClick:D=!1,clickContainerWidth:F="auto",centerPips:g=!0})=>{const[f,B]=w.useState(!1),T=ye[t]||ye.fear,M=x||T.maxValue,L=Math.max(0,Math.min(M,s));let A=T.filledColor;t==="countdown"&&v&&(["progress","dynamic-progress","simple-hope"].includes(v)?A="var(--gold)":["consequence","dynamic-consequence","simple-fear"].includes(v)?A="var(--purple)":["long-term","standard"].includes(v)&&(A="var(--text-secondary)"));const S=(l,a)=>{if(k)k(l,a);else if(j){const o=l+1;j(o)}},q=l=>{if(!D||!j||k)return;l.currentTarget.getBoundingClientRect();const a=l.currentTarget.querySelector(".pip-container");if(!a)return;const o=a.getBoundingClientRect(),i=l.clientX-o.left;if(i<0){L>0&&j(L-1);return}if(i>o.width){L<M&&j(L+1);return}const n=o.width,r=n*.05,d=n-2*r,c=i-r,y=L/M,C=d*y;c<C?L>0&&j(L-1):L<M&&j(L+1)},U=(()=>{if(!W||t!=="countdownDistributed")return[{start:0,end:M,groupIndex:0}];let l=0;return W.map((a,o)=>{const i={start:l,end:l+a,groupIndex:o};return l+=a,i})})(),K=()=>e.jsxs(e.Fragment,{children:[U.map(l=>e.jsx(ee.Fragment,{children:[...Array(l.end-l.start)].map((a,o)=>{const i=l.start+o,n=i<L;if(T.isDots)return e.jsx("div",{style:{...T.pipStyle,...n?T.filledStyle:T.emptyStyle,...u,cursor:j||k?"pointer":"default"},onClick:D?void 0:()=>S(i,n),title:`${i+1} of ${M}`},i);{const r=T.icon,d=r&&typeof r=="object"&&r.iconName,c=n?A:T.emptyColor;return e.jsx("span",{className:`fear-pip ${n?"filled":"empty"}`,style:{...T.pipStyle,color:c,cursor:j||k?"pointer":"default",...u},onClick:D?void 0:()=>S(i,n),title:`${i+1} of ${M}`,children:d?e.jsx(Ae,{icon:r,size:m}):e.jsx(r,{size:16})},i)}})},l.groupIndex)),p&&e.jsx("div",{style:{position:"relative",cursor:"help",pointerEvents:"none"},children:e.jsxs("div",{style:{position:"absolute",bottom:"100%",left:"50%",transform:f?"translateX(-50%) translateY(-5px)":"translateX(-50%)",background:"rgba(15, 23, 42, 0.95)",border:"1px solid var(--gray)",borderRadius:"var(--radius-md)",padding:"var(--space-md)",minWidth:"250px",zIndex:1e3,opacity:f?1:0,visibility:f?"visible":"hidden",transition:"all 0.2s ease",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.5)"},children:[e.jsx("div",{style:{fontWeight:600,color:"var(--gray-200)",marginBottom:"0.75rem",fontSize:"var(--text-sm)"},children:T.tooltipTitle}),T.tooltipInstructions.map((l,a)=>e.jsxs("div",{style:{marginBottom:"0.5rem",fontSize:"0.8rem",color:"var(--gray-300)",lineHeight:1.4},children:[e.jsx("strong",{style:{color:"var(--gray-200)"},children:l.text})," ",l.description]},a))]})})]});return e.jsx("div",{style:{width:F,height:"100%",cursor:j||k?"pointer":"default",touchAction:"manipulation",userSelect:"none",display:g?"flex":"block",alignItems:g?"center":"stretch",justifyContent:g?"center":"flex-start",...h},onClick:l=>{l.stopPropagation(),l.preventDefault(),D&&q(l)},onMouseEnter:()=>B(p),onMouseLeave:()=>B(!1),children:e.jsx("div",{className:"pip-container",style:{...T.containerStyle,width:"auto",height:"100%",padding:"0.125rem",textAlign:"center"},children:K()})})},Ze="/Daggerheart/assets/daggerheart-logo-fe7815ad.svg",et=({showFlyout:t,onFlyoutChange:s})=>{const[x,j]=w.useState(!1),[m,p]=w.useState(!1),h=t!==void 0?t:x,u=s||j;return w.useEffect(()=>{const v=W=>{W.target.closest(".help-button")||u(!1)};return document.addEventListener("click",v),()=>document.removeEventListener("click",v)},[u]),w.useEffect(()=>{const v=window.matchMedia("(max-width: 800px)"),W=k=>p(k.matches);return p(v.matches),v.addEventListener("change",W),()=>v.removeEventListener("change",W)},[]),e.jsxs("div",{className:"help-button",style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",padding:"0.5rem",color:h?"white":"var(--text-primary)",borderRadius:"50%",cursor:"pointer",transition:"all 0.2s ease",minWidth:"44px",minHeight:"44px",backgroundColor:h?"var(--purple)":"transparent"},onMouseEnter:v=>{h||(v.currentTarget.style.backgroundColor="var(--bg-secondary)")},onMouseLeave:v=>{h||(v.currentTarget.style.backgroundColor="transparent")},onClick:v=>{v.stopPropagation(),u(!h)},title:"Help & Info",children:[e.jsx("div",{style:{width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",color:"inherit",backgroundColor:"transparent",border:"none",outline:"none"},children:e.jsx(Me,{size:20})}),e.jsxs("div",{style:{position:"absolute",top:"50%",right:"100%",left:"auto",transform:"translateY(-50%)",background:"var(--bg-primary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",zIndex:1e3,opacity:h?1:0,visibility:h?"visible":"hidden",transition:"opacity 0.2s ease, visibility 0.2s ease, transform 0.2s ease",pointerEvents:h?"auto":"none",minWidth:"280px",maxWidth:m?"calc(100vw - 2rem)":"320px",marginRight:"0.5rem"},children:[e.jsxs("div",{style:{padding:"0.75rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",background:"var(--bg-primary)",maxWidth:"280px"},children:[e.jsx("img",{src:Ze,alt:"Daggerheart Community Content Logo",style:{width:"100%",maxWidth:"200px",height:"auto",margin:"0 auto 0.75rem auto",display:"block"},onError:v=>{console.error("Failed to load Daggerheart logo:",v.target.src),v.target.style.display="none";const W=document.createElement("div");W.style.cssText="text-align: center; margin-bottom: 0.75rem; font-size: 1.5rem; font-weight: bold; color: var(--purple);",W.textContent="⚔️ DAGGERHEART ⚔️",v.target.parentNode.insertBefore(W,v.target)},onLoad:()=>{}}),e.jsxs("div",{style:{fontSize:"0.7rem",lineHeight:1.3,color:"var(--text-secondary)",textAlign:"left",wordWrap:"break-word",overflowWrap:"break-word"},children:[e.jsx("p",{children:"This product includes materials from the Daggerheart System Reference Document 1.0, © Critical Role, LLC, under the terms of the Darrington Press Community Gaming (DPCGL) License."}),e.jsxs("p",{children:["More information can be found at ",e.jsx("a",{href:"https://www.daggerheart.com",target:"_blank",rel:"noopener noreferrer",children:"daggerheart.com"})]}),e.jsx("p",{children:e.jsx("em",{children:"This project is unofficial and not endorsed by Darrington Press or Critical Role."})})]})]}),e.jsx("button",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",padding:"0.25rem 1rem",color:"var(--text-primary)",border:"none",background:"none",width:"100%",textAlign:"left",cursor:"pointer",transition:"background-color 0.2s ease",fontSize:"0.875rem",minHeight:"32px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},onMouseEnter:v=>{v.target.style.backgroundColor="var(--gray-dark)"},onMouseLeave:v=>{v.target.style.backgroundColor="transparent"},onClick:v=>{v.stopPropagation(),u(!1),window.open("https://github.com/Splinter714/Daggerheart","_blank")},children:e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem"},children:e.jsx("span",{children:"GitHub"})})}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",padding:"0.25rem 1rem",color:"var(--text-secondary)",border:"none",background:"none",width:"100%",textAlign:"left",cursor:"default",fontSize:"0.875rem",minHeight:"32px"},children:e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem"},children:e.jsxs("span",{children:["Version ","0.3.3 (664808b)"]})})})]})]})},tt=({adversaries:t,environments:s,countdowns:x,deleteAdversary:j,deleteEnvironment:m,deleteCountdown:p,isClearMode:h,setIsClearMode:u,showFlyout:v,onFlyoutChange:W})=>{const[k,D]=w.useState(!1),F=v!==void 0?v:k,g=W||D,f=((t==null?void 0:t.length)||0)>0||((s==null?void 0:s.length)||0)>0||((x==null?void 0:x.length)||0)>0,B=(t||[]).some(S=>(S.hp||0)>=(S.hpMax||1));w.useEffect(()=>{const S=q=>{q.target.closest(".delete-clear-container")||(g(!1),h&&u(!1))};return document.addEventListener("click",S),()=>document.removeEventListener("click",S)},[h,g]),w.useEffect(()=>{h&&!f&&(u(!1),g(!1))},[h,f,u,g]);const T={position:"absolute",top:"50%",right:"100%",left:"auto",transform:"translateY(-50%)",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",padding:"0.5rem",minWidth:"200px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",zIndex:1e3,display:F?"block":"none",marginRight:"0.5rem"},M={background:h||F?"var(--red)":"none",border:"none",color:h||F?"white":f?"var(--text-primary)":"var(--text-secondary)",cursor:f?"pointer":"not-allowed",padding:"0.5rem",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s",opacity:f?1:.5,minWidth:"44px",minHeight:"44px"},L={background:"none",border:"none",color:"var(--text-primary)",cursor:"pointer",padding:"0.5rem",borderRadius:"var(--radius-sm)",width:"100%",textAlign:"left",display:"flex",alignItems:"center",gap:"0.5rem",transition:"background-color 0.2s"},A={backgroundColor:"var(--bg-hover)"};return e.jsxs("div",{className:"delete-clear-container",style:{position:"relative"},children:[e.jsx("button",{style:M,onClick:S=>{S.stopPropagation(),f&&(h?(u(!1),g(!1)):(u(!0),g(!0)))},title:f?h?"Clear Items":"Enter Clear Mode":"Nothing to clear",children:e.jsx(Le,{size:20})}),e.jsxs("div",{style:T,children:[t&&t.length>0&&e.jsxs("button",{style:L,onMouseEnter:S=>Object.assign(S.target.style,A),onMouseLeave:S=>Object.assign(S.target.style,L),onClick:S=>{S.stopPropagation(),D(!1),t.forEach(q=>j(q.id))},children:[e.jsx("span",{children:"×"}),e.jsx("span",{children:"All Adversaries"})]}),t&&t.length>0&&B&&e.jsxs("button",{style:L,onMouseEnter:S=>Object.assign(S.target.style,A),onMouseLeave:S=>Object.assign(S.target.style,L),onClick:S=>{S.stopPropagation(),D(!1),t.filter(N=>(N.hp||0)>=(N.hpMax||1)).forEach(N=>j(N.id))},children:[e.jsx("span",{children:"×"}),e.jsx("span",{children:"Dead Adversaries"})]}),s&&s.length>0&&e.jsxs("button",{style:L,onMouseEnter:S=>Object.assign(S.target.style,A),onMouseLeave:S=>Object.assign(S.target.style,L),onClick:S=>{S.stopPropagation(),D(!1),s.forEach(q=>m(q.id))},children:[e.jsx("span",{children:"×"}),e.jsx("span",{children:"All Environments"})]}),x&&x.length>0&&e.jsxs("button",{style:L,onMouseEnter:S=>Object.assign(S.target.style,A),onMouseLeave:S=>Object.assign(S.target.style,L),onClick:S=>{S.stopPropagation(),D(!1),x.forEach(q=>p(q.id))},children:[e.jsx("span",{children:"×"}),e.jsx("span",{children:"All Countdowns"})]})]})]})},rt=({adversaries:t,environments:s,countdowns:x,deleteAdversary:j,deleteEnvironment:m,deleteCountdown:p,isClearMode:h,setIsClearMode:u,sortAdversaries:v,onOpenDatabase:W})=>{const[k,D]=w.useState(!1),[F,g]=w.useState(!1),[f,B]=w.useState(!1);w.useEffect(()=>{const N=U=>{U.target.closest(".floating-menu-container")||(D(!1),g(!1),B(!1),h&&u(!1))};return document.addEventListener("click",N),()=>document.removeEventListener("click",N)},[h,u]),w.useEffect(()=>{k||(g(!1),B(!1),h&&u(!1))},[k,h,u]);const T=N=>{g(N),N&&(B(!1),h&&u(!1))},M=N=>{B(N),N&&g(!1)},A={position:"fixed",bottom:window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0||document.referrer.includes("android-app://")?"calc(60px + env(safe-area-inset-bottom) + 2rem)":"calc(60px + env(safe-area-inset-bottom) + 1rem)",right:"1rem",zIndex:1100,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",pointerEvents:"none",width:"56px",height:"56px"},S={width:"56px",height:"56px",borderRadius:"50%",background:k?"var(--red)":"var(--bg-secondary)",border:"2px solid var(--border)",color:k?"white":"var(--text-primary)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",transition:"all 0.3s ease",pointerEvents:"auto"},q=(N,U)=>{const o=135+N*135/(U-1),i=70,n=o*Math.PI/180,r=Math.cos(n)*i,d=Math.sin(n)*i;return{width:"48px",height:"48px",borderRadius:"50%",background:"var(--bg-secondary)",border:"1px solid var(--border)",color:"var(--text-primary)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)",transition:"all 0.3s ease",position:"absolute",pointerEvents:"auto",transform:k?`translate(${r}px, ${d}px)`:"translate(0px, 0px)",opacity:k?1:0,visibility:k?"visible":"hidden"}};return e.jsxs("div",{className:"floating-menu-container",style:A,children:[e.jsxs("div",{style:{position:"absolute",top:"0",left:"0",width:"56px",height:"56px",pointerEvents:"none"},children:[e.jsx("div",{style:q(0,4),children:e.jsx("button",{onClick:N=>{N.stopPropagation(),W("adversaries"),D(!1)},style:{width:"100%",height:"100%",background:"none",border:"none",color:"inherit",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"Browse Adversaries",children:e.jsx(Re,{size:20})})}),e.jsx("div",{style:q(1,4),children:e.jsx("button",{onClick:N=>{N.stopPropagation(),W("environments"),D(!1)},style:{width:"100%",height:"100%",background:"none",border:"none",color:"inherit",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"Browse Environments",children:e.jsx(De,{size:20})})}),e.jsx("div",{style:q(2,4),children:e.jsx(tt,{adversaries:t,environments:s,countdowns:x,deleteAdversary:j,deleteEnvironment:m,deleteCountdown:p,isClearMode:h,setIsClearMode:u,showFlyout:f,onFlyoutChange:M})}),e.jsx("div",{style:q(3,4),children:e.jsx(et,{showFlyout:F,onFlyoutChange:T})})]}),e.jsx("button",{style:S,onClick:N=>{N.stopPropagation(),D(!k)},title:k?"Close Menu":"Open Menu",children:k?e.jsx(oe,{size:24}):e.jsx(Pe,{size:24})})]})},nt=({position:t="top",children:s,onClick:x,className:j="",style:m={}})=>{const p=t==="top",h=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0||document.referrer.includes("android-app://"),u={background:"var(--bg-primary)",borderTop:p?"none":"1px solid var(--border)",borderBottom:p?"1px solid var(--border)":"none",padding:p?"0.25rem 0":"0.5rem",paddingBottom:p?"0.25rem":h?"calc(0.5rem + env(safe-area-inset-bottom) + 1rem)":"calc(0.5rem + env(safe-area-inset-bottom))",position:p?"relative":"sticky",[p?"top":"bottom"]:0,zIndex:p?10:100,order:p?1:3,flexShrink:0,touchAction:"manipulation",userSelect:"none",display:"flex",flexDirection:p?"column":"row",justifyContent:p?"stretch":"center",alignItems:p?"stretch":"center",gap:p?"0":"1rem",height:p?"auto":"60px",...m};return e.jsx("div",{className:j,style:u,onClick:x,children:s})},me=({value:t})=>e.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",width:"36px",height:"24px"},children:[e.jsx("svg",{width:"32",height:"24",viewBox:"0 0 32 24",fill:"none",stroke:"var(--text-secondary)",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",style:{position:"absolute"},children:e.jsx("path",{d:"M2 2h20l4 10-4 10H2l4-10-4-10z"})}),e.jsx("span",{style:{position:"absolute",fontSize:"0.7rem",fontWeight:500,color:"var(--text-primary)",textAlign:"center",zIndex:1,left:"45%",top:"50%",transform:"translate(-50%, -50%)"},children:t})]}),X={transitions:{hoverIn:"all 0.1s ease",hoverOut:"all 0.3s ease"},card:{backgroundColor:"var(--bg-card)",borderRadius:"8px",padding:"8px",cursor:"pointer",transition:"all 0.1s ease",position:"relative"},cardHover:{backgroundColor:"var(--bg-card-hover)"},cardDead:{opacity:.6,backgroundColor:"var(--gray-800)",borderColor:"var(--border)"},cardAtMax:{backgroundColor:"var(--success)",borderColor:"var(--success)"},rowMain:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},rowTitle:{fontSize:"16px",fontWeight:"600",color:"var(--text-primary)",margin:0},rowMeta:{display:"flex",gap:"8px",alignItems:"center"},badge:{padding:"2px 6px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},typeBadge:{backgroundColor:"var(--purple)",color:"var(--text-primary)"},tierBadge:{backgroundColor:"var(--info)",color:"var(--text-primary)"},damageInputPopup:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,borderRadius:"8px"},damageInputContent:{backgroundColor:"var(--gray-900)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(--border)",borderRadius:"8px",padding:"8px",display:"flex",flexDirection:"row",gap:"8px",minWidth:"200px",alignItems:"center",position:"absolute",right:"1rem",top:"50%",transform:"translateY(-50%)"},damageInput:{backgroundColor:"var(--gray-900)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(--border)",borderRadius:"4px",padding:"4px 6px",color:"var(--text-primary)",fontSize:"12px",width:"80px",textAlign:"center"},damageIndicators:{display:"flex",gap:"8px",alignItems:"center",justifyContent:"center"},damageDrop:{fontSize:"16px",color:"var(--text-secondary)",cursor:"pointer",transition:"color 0.1s ease"},applyButton:{backgroundColor:"var(--gray-600)",color:"white",borderWidth:"0",borderStyle:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"14px",cursor:"pointer",transition:"background-color 0.1s ease",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"32px",minHeight:"32px"}},ot=(t,s,x,j)=>{const[m,p]=w.useState(!1),[h,u]=w.useState("");w.useEffect(()=>{if(m){const g=f=>{f.target.closest(".damage-input-popup")||(p(!1),u(""))};return document.addEventListener("click",g),()=>document.removeEventListener("click",g)}},[m]);const v=g=>{g.stopPropagation(),g.preventDefault();const f=t.hp||0,B=t.hpMax||1,T=g.currentTarget.getBoundingClientRect(),M=g.clientX-T.left,L=T.width/B;Math.floor(M/L)<f?x&&x(t.id,1,t.hp):s&&s(t.id,1,t.hp,t.hpMax)},W=g=>{g.stopPropagation(),g.preventDefault();const f=t.stress||0,B=t.stressMax||1,T=g.currentTarget.getBoundingClientRect(),M=g.clientX-T.left,L=T.width/B;Math.floor(M/L)<f?j&&j(t.id,-1,t.stress,t.stressMax):j&&j(t.id,1,t.stress,t.stressMax)},k=g=>{g.stopPropagation(),(t.thresholds&&t.thresholds.major&&t.thresholds.severe||t.type==="Minion")&&(p(!0),u(t.type==="Minion"?"1":""))},D=()=>{const g=parseInt(h);if(g>0){if(t.type==="Minion")s&&s(t.id,g,t.hp,t.hpMax);else{let f=0;g>=t.thresholds.severe?f=3:g>=t.thresholds.major?f=2:g>=1&&(f=1),s&&s(t.id,f,t.hp,t.hpMax)}p(!1),u("")}};return{showDamageInput:m,damageValue:h,setDamageValue:u,setShowDamageInput:p,handleHpClick:v,handleStressClick:W,handleDifficultyClick:k,applyDamage:D,handleKeyDown:g=>{g.key==="Enter"?D():g.key==="Escape"&&(p(!1),u(""))}}},st=({item:t,type:s,mode:x="expanded",onClick:j,onDelete:m,onApplyDamage:p,onApplyHealing:h,onApplyStressChange:u,onUpdate:v,adversaries:W=[],isSelected:k=!1,isEditMode:D=!1,instances:F=[],isEmbedded:g=!1})=>{const f=ot(t,p,h,u);(s==="adversary"||s==="adversaries")&&f.handleDifficultyClick;const[B,T]=w.useState(!1),M=()=>{T(!0)},L=()=>{T(!1)},A=(o=!1)=>{let i={...X.card};if(k?i.transition="none":i.transition=B?X.transitions.hoverIn:X.transitions.hoverOut,o){const{marginTop:n,...r}=i;i=r}return(B&&x!=="expanded"||k)&&(i={...i,...X.cardHover}),s==="adversary"&&(t.hp||0)>=(t.hpMax||1)&&(i={...i,...X.cardDead}),s==="countdown"&&(t.value||0)>=t.max&&(i={...i,...X.cardAtMax}),i},S=()=>{if(g)return"";let o="border rounded-lg";return(B&&x!=="expanded"||k)&&(o+=" border-hover"),o},q=()=>{var o;if(s==="adversary"||s==="adversaries"){const i=t.baseName||((o=t.name)==null?void 0:o.replace(/\s+\(\d+\)$/,""))||"",n=t.duplicateNumber||1,r=[...W];return W.some(y=>y.id===t.id)||r.push(t),r.filter(y=>y.baseName===i).length>1?`${i} (${n})`:i}return t.name},N=()=>{const o=[];return t.type&&o.push(e.jsx("span",{style:{...X.badge,...X.typeBadge},children:t.type},"type")),s==="environment"&&t.tier&&o.push(e.jsxs("span",{style:{...X.badge,...X.tierBadge},children:["Tier ",t.tier]},"tier")),o},U=()=>s!=="adversary"||!f.showDamageInput||!(t.thresholds&&t.thresholds.major&&t.thresholds.severe||t.type==="Minion")?null:e.jsx("div",{className:"damage-input-popup",style:X.damageInputPopup,onClick:o=>{o.stopPropagation(),o.target===o.currentTarget&&(s==="adversary"||s==="adversaries")&&(f.setShowDamageInput(!1),f.setDamageValue(""))},children:e.jsxs("div",{className:"border rounded-lg",style:{...X.damageInputContent,borderColor:"var(--border)"},onClick:o=>o.stopPropagation(),children:[e.jsx("input",{type:"number",inputMode:"numeric",enterKeyHint:"done",placeholder:"dmg",min:(t.type==="Minion","0"),value:s==="adversary"||s==="adversaries"?f.damageValue:"",onChange:o=>{(s==="adversary"||s==="adversaries")&&f.setDamageValue(o.target.value)},onKeyDown:s==="adversary"||s==="adversaries"?f.handleKeyDown:void 0,className:"border rounded-sm",style:{...X.damageInput,borderColor:"var(--border)"},autoFocus:!0}),e.jsxs("div",{style:X.damageIndicators,children:[t.type==="Minion"?(()=>{var d,c;const o=parseInt(s==="adversary"||s==="adversaries"?f.damageValue:"0")||0,i=(d=t.features)==null?void 0:d.find(y=>{var C;return(C=y.name)==null?void 0:C.startsWith("Minion (")}),n=i?parseInt(((c=i.name.match(/\((\d+)\)/))==null?void 0:c[1])||"1"):1,r=Math.floor(o/n);return o>=n&&r>0?e.jsxs("span",{style:{...X.damageDrop,color:"var(--red)"},title:`${o} damage can defeat ${r+1} minion${r+1!==1?"s":""} (1 + ${r} additional)`,children:["+",r," additional minion(s)"]}):e.jsx("span",{style:X.damageDrop,title:`${o} damage defeats this minion only`,children:"+0 additional minion(s)"})})():[1,2,3].map(o=>{const i=parseInt(s==="adversary"||s==="adversaries"?f.damageValue:"0")||0;let n=!1;return o===1&&i>=1&&(n=!0),o===2&&i>=t.thresholds.major&&(n=!0),o===3&&i>=t.thresholds.severe&&(n=!0),e.jsx("span",{style:{...X.damageDrop,color:n?"var(--red)":"var(--text-secondary)"},onClick:r=>{r.stopPropagation(),(s==="adversary"||s==="adversaries")&&(o===1?f.setDamageValue("1"):o===2?f.setDamageValue(t.thresholds.major.toString()):o===3&&f.setDamageValue(t.thresholds.severe.toString()))},title:`Click to set damage to ${o===1?"1":o===2?t.thresholds.major:t.thresholds.severe}`,children:e.jsx(Q,{size:16})},o)}),e.jsx("button",{style:{...X.applyButton,backgroundColor:"var(--gray-600)"},onClick:o=>{o.stopPropagation(),(s==="adversary"||s==="adversaries")&&(!f.damageValue||parseInt(f.damageValue)<1?(f.setShowDamageInput(!1),f.setDamageValue("")):f.applyDamage())},title:!f.damageValue||parseInt(f.damageValue)<1?"Close damage input":"Apply damage",children:!f.damageValue||parseInt(f.damageValue)<1?e.jsx(oe,{size:16}):e.jsx(Fe,{size:16})})]})]})}),K=()=>{var n;const o=(t.hp||0)>=(t.hpMax||1),i=x==="edit";return e.jsxs("div",{className:S(),style:{...A(!0),padding:0,minHeight:"400px",opacity:o?.7:1,backgroundColor:o?"var(--gray-900)":A(!0).backgroundColor,borderColor:o?"color-mix(in srgb, var(--gray-600) 40%, transparent)":k?"var(--purple)":B&&x!=="expanded"?"var(--border-hover)":"var(--border)",borderWidth:"2px",display:"flex",flexDirection:"column",position:"relative"},onClick:j,...x!=="expanded"&&{onMouseEnter:M,onMouseLeave:L},children:[o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`repeating-linear-gradient(
                45deg,
                transparent,
                transparent 8px,
                var(--gray-600) 1px,
                var(--gray-600) 9px
              )`,pointerEvents:"none",zIndex:9999}}),e.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"var(--text-secondary)",fontSize:"1rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",zIndex:1e4,pointerEvents:"none",textShadow:"1px 1px 2px rgba(0, 0, 0, 0.5)",backgroundColor:"var(--gray-900)",padding:"0.25rem 0.5rem",borderRadius:"0.5rem",border:"0.5px solid var(--gray-600)"},children:"DEFEATED"})]}),e.jsx("div",{className:"border-b",style:{padding:"8px",flexShrink:0,backgroundColor:"var(--bg-card)",borderRadius:"8px 8px 0 0",position:"relative",zIndex:o?1:"auto",borderBottomColor:k?"var(--purple)":"var(--border)"},children:e.jsx("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",zIndex:o?1:"auto"},children:e.jsx("h4",{style:{...X.rowTitle,color:o?"color-mix(in srgb, var(--gray-400) 80%, transparent)":X.rowTitle.color,textAlign:"left",margin:0,fontSize:"1.1rem"},children:((n=t.name)==null?void 0:n.replace(/\s+\(\d+\)$/,""))||t.name})})}),e.jsxs("div",{style:{borderRadius:"0 0 8px 8px"},children:[e.jsx("div",{style:{marginBottom:"1rem",padding:"0 8px 0.75rem 8px",borderBottom:"1px solid var(--border)"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",fontSize:"0.875rem"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px"},children:[e.jsx(ae,{size:32,style:{color:"var(--text-primary)",transform:"rotate(0deg)"}}),e.jsx("span",{style:{position:"absolute",fontSize:"0.75rem",fontWeight:600,color:"var(--text-primary)",textAlign:"center"},children:t.difficulty||"~"})]}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:500},children:"Difficulty"})]})}),(t.atk!==void 0||t.weapon||t.damage)&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[t.atk!==void 0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[e.jsx(Ne,{size:32,strokeWidth:1,style:{color:"var(--text-secondary)"}}),e.jsxs("span",{style:{position:"absolute",fontSize:"0.875rem",fontWeight:600,color:"white",pointerEvents:"none"},children:[t.atk>=0?"+":"",t.atk]})]}),t.weapon&&e.jsxs("span",{children:[e.jsxs("strong",{children:[t.weapon,":"]})," ",t.range||"Melee"]}),t.damage&&e.jsxs("span",{children:[e.jsx("strong",{children:"Damage:"})," ",t.damage]})]}),t.experience&&t.experience.length>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Experience:"})," ",t.experience.map(r=>typeof r=="string"?r:`${r.name} ${r.modifier>=0?"+":""}${r.modifier}`).join(", ")]})]})}),t.features&&t.features.length>0&&e.jsxs("div",{style:{marginBottom:"1rem",padding:"0 8px"},children:[t.features.filter(r=>r.type==="Passive").length>0&&e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[e.jsx("hr",{style:{flex:1,border:"none",borderTop:"1px solid var(--border)",margin:0}}),e.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"white",margin:0,textTransform:"uppercase",letterSpacing:"0.5px",textAlign:"center",minWidth:"80px"},children:"Passives"}),e.jsx("hr",{style:{flex:1,border:"none",borderTop:"1px solid var(--border)",margin:0}})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:t.features.filter(r=>r.type==="Passive").map((r,d)=>e.jsxs("div",{style:{fontSize:"0.875rem",lineHeight:1.4,color:"var(--text-secondary)"},children:[e.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)"},children:r.name}),r.description&&e.jsxs("span",{children:[" - ",r.description]})]},d))})]}),t.features.filter(r=>r.type==="Action").length>0&&e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[e.jsx("hr",{style:{flex:1,border:"none",borderTop:"1px solid var(--border)",margin:0}}),e.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"white",margin:0,textTransform:"uppercase",letterSpacing:"0.5px",textAlign:"center",minWidth:"80px"},children:"Actions"}),e.jsx("hr",{style:{flex:1,border:"none",borderTop:"1px solid var(--border)",margin:0}})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:t.features.filter(r=>r.type==="Action").map((r,d)=>e.jsxs("div",{style:{fontSize:"0.875rem",lineHeight:1.4,color:"var(--text-secondary)"},children:[e.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)"},children:r.name}),r.description&&e.jsxs("span",{children:[" - ",r.description]})]},d))})]}),t.features.filter(r=>r.type==="Reaction").length>0&&e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[e.jsx("hr",{style:{flex:1,border:"none",borderTop:"1px solid var(--border)",margin:0}}),e.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"white",margin:0,textTransform:"uppercase",letterSpacing:"0.5px",textAlign:"center",minWidth:"80px"},children:"Reactions"}),e.jsx("hr",{style:{flex:1,border:"none",borderTop:"1px solid var(--border)",margin:0}})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:t.features.filter(r=>r.type==="Reaction").map((r,d)=>e.jsxs("div",{style:{fontSize:"0.875rem",lineHeight:1.4,color:"var(--text-secondary)"},children:[e.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)"},children:r.name}),r.description&&e.jsxs("span",{children:[" - ",r.description]})]},d))})]})]})]}),t.type!=="Minion"&&t.thresholds&&e.jsx("div",{style:{marginTop:"1rem",padding:"0.75rem 8px 0 8px",borderTop:"1px solid var(--border)"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.875rem"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"2px",marginTop:"-3px"},children:e.jsx(Q,{size:16,style:{color:"var(--red)"}})}),e.jsx(me,{value:t.thresholds.major||"7"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"2px",marginTop:"-3px"},children:[e.jsx(Q,{size:16,style:{color:"var(--red)"}}),e.jsx(Q,{size:16,style:{color:"var(--red)"}})]}),e.jsx(me,{value:t.thresholds.severe||"14"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"2px",marginTop:"-3px"},children:[e.jsx(Q,{size:16,style:{color:"var(--red)"}}),e.jsx(Q,{size:16,style:{color:"var(--red)"}}),e.jsx(Q,{size:16,style:{color:"var(--red)"}})]})]})}),F&&F.length>0&&e.jsx("div",{style:{marginTop:"1rem",borderTop:"1px solid var(--border)"},children:F.map((r,d)=>{const c=(r.hp||0)>=(r.hpMax||1);return e.jsx("div",{children:e.jsxs("div",{style:{backgroundColor:"var(--bg-secondary)",borderRadius:"4px",padding:"4px",border:"1px solid var(--border)",marginBottom:"4px",display:"flex",justifyContent:"flex-start",alignItems:"center",gap:"8px",opacity:c?.7:1,backgroundColor:c?"var(--gray-900)":"var(--bg-secondary)",borderColor:c?"color-mix(in srgb, var(--gray-600) 40%, transparent)":"var(--border)",position:"relative"},children:[c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`repeating-linear-gradient(
                          45deg,
                          transparent 0px,
                          transparent 8px,
                          var(--gray-600) 9px,
                          var(--gray-600) 9px
                        )`,pointerEvents:"none",zIndex:1,borderRadius:"4px"}}),e.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"var(--text-secondary)",fontSize:"0.75rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",zIndex:2,backgroundColor:"var(--gray-900)",padding:"0.125rem 0.25rem",borderRadius:"0.25rem",border:"0.5px solid var(--gray-600)"},children:"DEFEATED"})]}),e.jsx("div",{style:{backgroundColor:"var(--bg-secondary)",borderRadius:"6px",border:"1px solid var(--border-hover)",width:"32px",textAlign:"center",flexShrink:0,padding:"2px"},children:e.jsx("span",{style:{fontSize:"1rem",fontWeight:600,color:"var(--text-primary)"},children:r.duplicateNumber||1})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"2px"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:y=>{if(y.stopPropagation(),!p||s!=="adversary")return;y.currentTarget.getBoundingClientRect();const C=y.currentTarget.querySelector(".pip-container");if(!C)return;const I=C.getBoundingClientRect(),$=y.clientX-I.left,H=r.hp||0,R=r.hpMax||1;if($<0){H>0&&h&&h(r.id,1,H);return}if($>I.width){H<R&&p(r.id,1,H,R);return}const P=I.width,Y=P*.05,b=P-2*Y,V=$-Y,O=H/R,_=b*O;V<_?H>0&&h&&h(r.id,1,H):H<R&&p(r.id,1,H,R)},children:e.jsx("div",{className:"pip-container",style:{display:"flex",gap:"2px",alignItems:"center"},children:Array.from({length:r.hpMax||1},(y,C)=>e.jsx("span",{style:{fontSize:"0.75rem",color:C<(r.hp||0)?"var(--red)":"var(--text-secondary)",transition:"all 0.1s ease"},children:e.jsx(Q,{size:16})},C))})}),r.stressMax>0&&e.jsx("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:y=>{if(y.stopPropagation(),!u||s!=="adversary")return;y.currentTarget.getBoundingClientRect();const C=y.currentTarget.querySelector(".pip-container");if(!C)return;const I=C.getBoundingClientRect(),$=y.clientX-I.left,H=r.stress||0,R=r.stressMax;if($<0){H>0&&u(r.id,-1);return}if($>I.width){H<R&&u(r.id,1);return}const P=I.width,Y=P*.05,b=P-2*Y,V=$-Y,O=H/R,_=b*O;V<_?H>0&&u(r.id,-1):H<R&&u(r.id,1)},children:e.jsx("div",{className:"pip-container",style:{display:"flex",gap:"2px",alignItems:"center"},children:Array.from({length:r.stressMax},(y,C)=>e.jsx("span",{style:{fontSize:"0.75rem",color:C<(r.stress||0)?"var(--gold)":"var(--text-secondary)",transition:"all 0.1s ease"},children:e.jsx(Ce,{size:16})},C))})})]})]},r.id)},r.id)})}),t.motives&&e.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem 8px 0 8px",borderTop:"1px solid var(--border)"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,color:"var(--text-primary)",margin:"0 0 0.5rem 0"},children:"Motives"}),i?e.jsx("textarea",{style:{width:"100%",minHeight:"80px",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.5rem",backgroundColor:"var(--bg-secondary)",color:"white",fontSize:"0.875rem",lineHeight:1.5,resize:"vertical",fontFamily:"inherit"},value:t.motives,onChange:r=>{v&&v(t.id,{motives:r.target.value})},placeholder:"Enter adversary motives..."}):e.jsx("p",{style:{fontSize:"0.875rem",lineHeight:1.5,color:"var(--text-secondary)",margin:0,whiteSpace:"pre-wrap"},children:t.motives})]}),t.description&&e.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem 8px 0 8px",borderTop:"1px solid var(--border)"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,color:"var(--text-primary)",margin:"0 0 0.5rem 0"},children:"Description"}),i?e.jsx("textarea",{style:{width:"100%",minHeight:"100px",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.5rem",backgroundColor:"var(--bg-secondary)",color:"white",fontSize:"0.875rem",lineHeight:1.5,resize:"vertical",fontFamily:"inherit"},value:t.description,onChange:r=>{v&&v(t.id,{description:r.target.value})},placeholder:"Enter adversary description..."}):e.jsx("p",{style:{fontSize:"0.875rem",lineHeight:1.5,color:"var(--text-secondary)",margin:0,whiteSpace:"pre-wrap"},children:t.description})]}),U()]})},l=()=>{const i=x==="edit";return e.jsxs("div",{className:S(),style:{...A(!0),padding:0,minHeight:"400px",display:"flex",flexDirection:"column",position:"relative"},onClick:j,...x!=="expanded"&&{onMouseEnter:M,onMouseLeave:L},children:[e.jsx("div",{className:"border-b",style:{padding:"8px",flexShrink:0,backgroundColor:"var(--bg-card)",borderRadius:"8px 8px 0 0",position:"relative"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"0.5rem"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"0.25rem"},children:[e.jsx("h2",{style:{fontSize:"1rem",fontWeight:600,color:"var(--text-primary)",margin:0},children:t.name}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[t.tier&&e.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:500,color:"var(--text-secondary)",letterSpacing:"0.5px"},children:["Tier ",t.tier]}),t.type&&e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:500,color:"var(--text-secondary)",letterSpacing:"0.5px"},children:t.type})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.difficulty&&e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[e.jsx(ae,{size:32,strokeWidth:1,style:{color:"var(--text-secondary)"}}),e.jsx("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"0.75rem",fontWeight:700,color:"white",pointerEvents:"none"},children:t.difficulty})]}),!1]})]})}),e.jsxs("div",{style:{flex:1,overflowY:"auto",borderRadius:"0 0 8px 8px"},children:[t.description&&e.jsxs("div",{style:{marginBottom:"1rem",padding:"0 8px 0.75rem 8px",borderBottom:"1px solid var(--border)"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,color:"var(--text-primary)",margin:"0 0 0.5rem 0"},children:"Description"}),i?e.jsx("textarea",{style:{width:"100%",minHeight:"100px",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.5rem",backgroundColor:"var(--bg-secondary)",color:"white",fontSize:"0.875rem",lineHeight:1.5,resize:"vertical",fontFamily:"inherit"},value:t.description,onChange:n=>{v&&v(t.id,{description:n.target.value})},placeholder:"Enter environment description..."}):e.jsx("p",{style:{fontSize:"0.875rem",lineHeight:1.5,color:"var(--text-secondary)",margin:0,whiteSpace:"pre-wrap"},children:t.description})]}),t.impulses&&e.jsxs("div",{style:{marginBottom:"1rem",padding:"0 8px 0.75rem 8px",borderBottom:"1px solid var(--border)"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,color:"var(--text-primary)",margin:"0 0 0.5rem 0"},children:"Impulses"}),e.jsx("p",{style:{fontSize:"0.875rem",lineHeight:1.5,color:"var(--text-secondary)",margin:0,whiteSpace:"pre-wrap"},children:t.impulses})]}),e.jsxs("div",{style:{marginBottom:"1rem",padding:"0 8px 0.75rem 8px",borderBottom:"1px solid var(--border)"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,color:"var(--text-primary)",margin:"0 0 0.5rem 0"},children:"Core Stats"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",fontSize:"0.875rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap",fontSize:"0.875rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px"},children:[e.jsx(ae,{size:32,style:{color:"var(--text-primary)",transform:"rotate(0deg)"}}),e.jsx("span",{style:{position:"absolute",fontSize:"0.75rem",fontWeight:600,color:"var(--text-primary)",textAlign:"center"},children:t.difficulty||"~"})]}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:500},children:"Difficulty"})]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Type:"})," ",t.type]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("span",{children:e.jsx("strong",{children:"Tier:"})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[e.jsx(He,{size:32,strokeWidth:1,style:{color:"var(--text-secondary)"}}),e.jsx("span",{style:{position:"absolute",fontSize:"0.875rem",fontWeight:600,color:"white",pointerEvents:"none"},children:t.tier})]})]})]}),t.potentialAdversaries&&t.potentialAdversaries.length>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Potential Adversaries:"}),e.jsx("div",{style:{marginTop:"0.25rem",display:"flex",flexDirection:"column",gap:"0.125rem"},children:t.potentialAdversaries.map((n,r)=>e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginLeft:"0.5rem"},children:["• ",n]},r))})]})]})]}),t.features&&t.features.length>0&&e.jsxs("div",{style:{marginBottom:"1rem",padding:"0 8px"},children:[t.features.filter(n=>n.type==="Passive").length>0&&e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[e.jsx("hr",{style:{flex:1,border:"none",borderTop:"1px solid var(--border)",margin:0}}),e.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"white",margin:0,textTransform:"uppercase",letterSpacing:"0.5px",textAlign:"center",minWidth:"80px"},children:"Passives"}),e.jsx("hr",{style:{flex:1,border:"none",borderTop:"1px solid var(--border)",margin:0}})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.features.filter(n=>n.type==="Passive").map((n,r)=>e.jsxs("div",{style:{fontSize:"0.875rem",lineHeight:1.4,color:"var(--text-secondary)"},children:[e.jsx("div",{style:{fontWeight:600,color:"white",marginBottom:"0.25rem"},children:n.name}),e.jsx("div",{style:{marginBottom:"0.25rem"},children:n.description}),n.details&&n.details.length>0&&e.jsxs("div",{style:{marginLeft:"0.5rem"},children:[e.jsx("strong",{children:"Details:"}),e.jsx("ul",{style:{margin:"0.25rem 0 0 0",paddingLeft:"1rem",fontSize:"0.75rem"},children:n.details.map((d,c)=>e.jsx("li",{children:d},c))})]}),n.prompts&&n.prompts.length>0&&e.jsxs("div",{style:{marginLeft:"0.5rem"},children:[e.jsx("strong",{children:"Prompts:"}),e.jsx("ul",{style:{margin:"0.25rem 0 0 0",paddingLeft:"1rem",fontSize:"0.75rem"},children:n.prompts.map((d,c)=>e.jsxs("li",{style:{fontStyle:"italic"},children:['"',d,'"']},c))})]})]},r))})]}),t.features.filter(n=>n.type==="Action").length>0&&e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[e.jsx("hr",{style:{flex:1,border:"none",borderTop:"1px solid var(--border)",margin:0}}),e.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"white",margin:0,textTransform:"uppercase",letterSpacing:"0.5px",textAlign:"center",minWidth:"80px"},children:"Actions"}),e.jsx("hr",{style:{flex:1,border:"none",borderTop:"1px solid var(--border)",margin:0}})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.features.filter(n=>n.type==="Action").map((n,r)=>e.jsxs("div",{style:{fontSize:"0.875rem",lineHeight:1.4,color:"var(--text-secondary)"},children:[e.jsx("div",{style:{fontWeight:600,color:"white",marginBottom:"0.25rem"},children:n.name}),e.jsx("div",{style:{marginBottom:"0.25rem"},children:n.description}),n.details&&n.details.length>0&&e.jsxs("div",{style:{marginLeft:"0.5rem"},children:[e.jsx("strong",{children:"Details:"}),e.jsx("ul",{style:{margin:"0.25rem 0 0 0",paddingLeft:"1rem",fontSize:"0.75rem"},children:n.details.map((d,c)=>e.jsx("li",{children:d},c))})]}),n.prompts&&n.prompts.length>0&&e.jsxs("div",{style:{marginLeft:"0.5rem"},children:[e.jsx("strong",{children:"Prompts:"}),e.jsx("ul",{style:{margin:"0.25rem 0 0 0",paddingLeft:"1rem",fontSize:"0.75rem"},children:n.prompts.map((d,c)=>e.jsxs("li",{style:{fontStyle:"italic"},children:['"',d,'"']},c))})]})]},r))})]}),t.features.filter(n=>n.type==="Reaction").length>0&&e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},children:[e.jsx("hr",{style:{flex:1,border:"none",borderTop:"1px solid var(--border)",margin:0}}),e.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"white",margin:0,textTransform:"uppercase",letterSpacing:"0.5px",textAlign:"center",minWidth:"80px"},children:"Reactions"}),e.jsx("hr",{style:{flex:1,border:"none",borderTop:"1px solid var(--border)",margin:0}})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.features.filter(n=>n.type==="Reaction").map((n,r)=>e.jsxs("div",{style:{fontSize:"0.875rem",lineHeight:1.4,color:"var(--text-secondary)"},children:[e.jsx("div",{style:{fontWeight:600,color:"white",marginBottom:"0.25rem"},children:n.name}),e.jsx("div",{style:{marginBottom:"0.25rem"},children:n.description}),n.details&&n.details.length>0&&e.jsxs("div",{style:{marginLeft:"0.5rem"},children:[e.jsx("strong",{children:"Details:"}),e.jsx("ul",{style:{margin:"0.25rem 0 0 0",paddingLeft:"1rem",fontSize:"0.75rem"},children:n.details.map((d,c)=>e.jsx("li",{children:d},c))})]}),n.prompts&&n.prompts.length>0&&e.jsxs("div",{style:{marginLeft:"0.5rem"},children:[e.jsx("strong",{children:"Prompts:"}),e.jsx("ul",{style:{margin:"0.25rem 0 0 0",paddingLeft:"1rem",fontSize:"0.75rem"},children:n.prompts.map((d,c)=>e.jsxs("li",{style:{fontStyle:"italic"},children:['"',d,'"']},c))})]})]},r))})]})]}),F&&F.length>0&&e.jsx("div",{style:{marginTop:"1rem",borderTop:"1px solid var(--border)"},children:F.map((n,r)=>{const d=(n.hp||0)>=(n.hpMax||1);return e.jsx("div",{children:e.jsxs("div",{style:{backgroundColor:"var(--bg-secondary)",borderRadius:"4px",padding:"8px",border:"1px solid var(--border)",marginBottom:"4px",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"8px",opacity:d?.7:1,backgroundColor:d?"var(--gray-900)":"var(--bg-secondary)",borderColor:d?"color-mix(in srgb, var(--gray-600) 40%, transparent)":"var(--border)",position:"relative"},children:[d&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`repeating-linear-gradient(
                            45deg,
                            transparent 0px,
                            transparent 8px,
                            var(--gray-600) 9px,
                            var(--gray-600) 9px
                          )`,pointerEvents:"none",zIndex:1,borderRadius:"4px"}}),e.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"var(--text-secondary)",fontSize:"0.75rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",zIndex:2,backgroundColor:"var(--gray-900)",padding:"0.125rem 0.25rem",borderRadius:"0.25rem",border:"0.5px solid var(--gray-600)"},children:"DEFEATED"})]}),e.jsx("div",{style:{backgroundColor:"var(--bg-secondary)",borderRadius:"3px",padding:"2px 6px",border:"1px solid var(--border)",minWidth:"24px",textAlign:"center"},children:e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"var(--text-primary)"},children:n.duplicateNumber||1})}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flex:1},children:e.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:500,color:"var(--text-secondary)"},children:["Instance ",r+1]})})]},n.id)},n.id)})})]})]})};return(x==="expanded"||x==="edit")&&(s==="adversary"||s==="adversaries")?K():(x==="expanded"||x==="edit")&&(s==="environment"||s==="environments")?l():s==="adversary"||s==="adversaries"||s==="environment"||s==="environments"?null:e.jsxs("div",{className:S(),style:A(!0),children:[e.jsxs("div",{style:X.rowMain,children:[e.jsx("h4",{style:X.rowTitle,children:q()}),e.jsx("div",{style:X.rowMeta,children:N()})]}),e.jsxs("p",{style:{color:"var(--text-secondary)",fontSize:"12px",margin:0},children:["Expanded view coming soon for ",s]})]})},it="modulepreload",at=function(t){return"/Daggerheart/"+t},fe={},ve=function(s,x,j){if(!x||x.length===0)return s();const m=document.getElementsByTagName("link");return Promise.all(x.map(p=>{if(p=at(p),p in fe)return;fe[p]=!0;const h=p.endsWith(".css"),u=h?'[rel="stylesheet"]':"";if(!!j)for(let k=m.length-1;k>=0;k--){const D=m[k];if(D.href===p&&(!h||D.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${p}"]${u}`))return;const W=document.createElement("link");if(W.rel=h?"stylesheet":it,h||(W.as="script",W.crossOrigin=""),W.href=p,document.head.appendChild(W),h)return new Promise((k,D)=>{W.addEventListener("load",k),W.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${p}`)))})})).then(()=>s()).catch(p=>{const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=p,window.dispatchEvent(h),!h.defaultPrevented)throw p})},se={Minion:1,Social:1,Support:1,Horde:2,Ranged:2,Skulk:2,Standard:2,Leader:3,Bruiser:4,Solo:5},be={twoOrMoreSolos:-2,noBruisersHordesLeadersSolos:1,lowerTierAdversary:1};let Ie={adversaries:[]},We={environments:[]};const lt=async()=>{try{const t=await ve(()=>import("./adversaries-77db5e43.js"),[]);Ie=(t==null?void 0:t.default)||t}catch(t){console.warn("Failed to load adversaries.json:",t)}try{const t=await ve(()=>import("./environments-5ca1c1e1.js"),[]);We=(t==null?void 0:t.default)||t}catch(t){console.warn("Failed to load environments.json:",t)}},dt=(t,s=[],x=4,j=1)=>{const[m,p]=w.useState(""),[h,u]=w.useState([{field:"tier",direction:"asc"},{field:"name",direction:"asc"}]),[v,W]=w.useState([]),[k,D]=w.useState(!0),[F,g]=w.useState([]),[f,B]=w.useState([]),[T,M]=w.useState(!1),[L,A]=w.useState(!1),S=w.useRef(null),q=w.useRef(null);w.useEffect(()=>{(async()=>{await lt(),D(!1);let y=[];t==="adversary"?y=Ie.adversaries||[]:t==="environment"&&(y=We.environments||[]),W(y)})()},[t]);const N=c=>{const y=v.map(C=>C[c]).filter(Boolean);return[...new Set(y)].sort((C,I)=>typeof C=="number"&&typeof I=="number"?C-I:String(C).localeCompare(String(I)))},U=N("tier"),K=N("type"),l=w.useMemo(()=>{let c=v.filter(y=>{var H,R;const C=y.name.toLowerCase().includes(m.toLowerCase())||((H=y.type)==null?void 0:H.toLowerCase().includes(m.toLowerCase()))||((R=y.description)==null?void 0:R.toLowerCase().includes(m.toLowerCase())),I=F.length===0||(F.includes("party-tier")?y.tier===j:F.includes(y.tier.toString())),$=f.length===0||f.includes(y.type);return C&&I&&$});return c.sort((y,C)=>{for(const I of h){const{field:$,direction:H}=I;let R=y[$],P=C[$];if($==="tier")R=parseInt(R)||0,P=parseInt(P)||0;else if($==="cost"){const Y=b=>{if(t!=="adversary")return 0;const V=se[b.type]||2;let O=0;const _=s.filter(E=>E.type==="adversary"&&E.item.type==="Solo"&&E.quantity>0).reduce((E,G)=>E+G.quantity,0),Z=s.filter(E=>E.type==="adversary"&&["Bruiser","Horde","Leader","Solo"].includes(E.item.type)&&E.quantity>0).reduce((E,G)=>E+G.quantity,0);return b.type==="Solo"&&_===1&&(O+=2),["Bruiser","Horde","Leader","Solo"].includes(b.type)&&Z===0&&(O+=1),V+O};R=Y(y),P=Y(C)}else if($==="difficulty"){const Y=parseInt(R),b=parseInt(P);!isNaN(Y)&&!isNaN(b)?(R=Y,P=b):!isNaN(Y)&&isNaN(b)?(R=Y,P=999):isNaN(Y)&&!isNaN(b)?(R=999,P=b):(R=String(R||"").toLowerCase(),P=String(P||"").toLowerCase())}else typeof R=="string"&&typeof P=="string"?(R=R.toLowerCase(),P=P.toLowerCase()):(R=String(R||"").toLowerCase(),P=String(P||"").toLowerCase());if(H==="asc"){if(R>P)return 1;if(R<P)return-1}else{if(R<P)return 1;if(R>P)return-1}}return 0}),c},[v,m,h,F,f,s,x,j]),a=c=>{u(y=>{const C=y.findIndex(I=>I.field===c);if(C>=0)if(C===0){const I=[...y];return I[0]={...I[0],direction:I[0].direction==="asc"?"desc":"asc"},I}else{const I=[...y];return I.splice(C,1)[0],[{field:c,direction:"asc"},...I]}else return[{field:c,direction:"asc"},...y]})},o=c=>{g(c==="clear"?[]:c==="party-tier"?["party-tier"]:y=>y.includes(c)?y.filter(C=>C!==c):[...y,c])},i=c=>{B(c==="clear"?[]:y=>y.includes(c)?y.filter(C=>C!==c):[...y,c])},n=F.length>0,r=f.length>0;return w.useEffect(()=>{const c=C=>{const I=C.target.closest(".filter-dropdown"),$=C.target.closest(".header-filter-icon");I||$||(M(!1),A(!1))},y=C=>{C.key==="Escape"&&(M(!1),A(!1))};return document.addEventListener("pointerdown",c,!0),document.addEventListener("mousedown",c,!0),document.addEventListener("touchstart",c,!0),document.addEventListener("click",c,!0),document.addEventListener("keydown",y,!0),()=>{document.removeEventListener("pointerdown",c,!0),document.removeEventListener("mousedown",c,!0),document.removeEventListener("touchstart",c,!0),document.removeEventListener("click",c,!0),document.removeEventListener("keydown",y,!0)}},[M,A]),{searchTerm:m,setSearchTerm:p,sortFields:h,handleSort:a,filteredAndSortedData:l,loading:k,selectedTiers:F,selectedTypes:f,showTierDropdown:T,setShowTierDropdown:M,showTypeDropdown:L,setShowTypeDropdown:A,tierFilterRef:S,typeFilterRef:q,uniqueTiers:U,uniqueTypes:K,handleTierSelect:o,handleTypeSelect:i,isTierFiltered:n,isTypeFiltered:r,getDropdownStyle:c=>{if(!c.current)return{};const y=c.current.getBoundingClientRect();return{position:"fixed",top:y.bottom+4,left:y.left-100,zIndex:99999}}}},ct=({searchTerm:t,onSearchChange:s,type:x})=>e.jsx("div",{style:z.browserHeader,children:e.jsx("input",{type:"text",placeholder:"Search",value:t,onChange:j=>s(j.target.value),style:z.searchInput})}),pt=({sortFields:t,onSort:s,type:x,uniqueTiers:j,uniqueTypes:m,selectedTiers:p,selectedTypes:h,showTierDropdown:u,setShowTierDropdown:v,showTypeDropdown:W,setShowTypeDropdown:k,tierFilterRef:D,typeFilterRef:F,handleTierSelect:g,handleTypeSelect:f,isTierFiltered:B,isTypeFiltered:T,getDropdownStyle:M,costFilter:L,showCostDropdown:A,setShowCostDropdown:S,costFilterRef:q,handleCostFilterSelect:N,isCostFiltered:U})=>{const[K,l]=w.useState(null),o=(()=>x==="adversary"?[{key:"name",label:"Name"},{key:"tier",label:"Tier",hasFilter:!0},{key:"type",label:"Type",hasFilter:!0},{key:"cost",label:"Cost",hasFilter:!0},{key:"difficulty",label:"Diff"},{key:"action",label:""}]:x==="environment"?[{key:"name",label:"Name"},{key:"tier",label:"Tier",hasFilter:!0},{key:"type",label:"Type",hasFilter:!0},{key:"difficulty",label:"Diff"},{key:"action",label:""}]:[])(),i=()=>{if(!A)return null;const r=[{value:"all",label:"All"},{value:"auto-grey",label:"Auto Grey"},{value:"auto-hide",label:"Auto Hide"}];return pe.createPortal(e.jsx("div",{className:"filter-dropdown",style:{...z.filterDropdown,...M(q),maxHeight:"60vh",overflow:"auto"},onMouseDown:d=>d.stopPropagation(),onClick:d=>d.stopPropagation(),children:r.map(d=>{const c=L===d.value;return e.jsxs("div",{style:{...z.filterOption,...c?z.filterOptionSelected:{}},onClick:()=>N(d.value),children:[e.jsx("span",{style:z.checkIcon,children:c?e.jsx(te,{size:16}):e.jsx(re,{size:16})}),e.jsx("span",{style:z.filterLabel,children:d.label})]},d.value)})}),document.body)},n=(r,d,c,y,C,I,$,H)=>{if(!C)return null;const R=()=>{(r==="tier"||r==="type")&&y("clear")};return pe.createPortal(e.jsxs("div",{className:"filter-dropdown",style:{...z.filterDropdown,...M($),maxHeight:"60vh",overflow:"auto"},onMouseDown:P=>P.stopPropagation(),onClick:P=>P.stopPropagation(),children:[e.jsxs("div",{style:{...z.filterOption,...c.length===0?z.filterOptionSelected:{}},onClick:R,children:[e.jsx("span",{style:z.checkIcon,children:c.length===0?e.jsx(te,{size:16}):e.jsx(re,{size:16})}),e.jsx("span",{style:z.filterLabel,children:"All"})]}),r==="tier"&&e.jsxs("div",{style:{...z.filterOption,...c.includes("party-tier")?z.filterOptionSelected:{}},onClick:()=>y("party-tier"),children:[e.jsx("span",{style:z.checkIcon,children:c.includes("party-tier")?e.jsx(te,{size:16}):e.jsx(re,{size:16})}),e.jsx("span",{style:z.filterLabel,children:"Party Tier"})]}),d.map(P=>{const Y=c.includes(P.toString());return e.jsxs("div",{style:{...z.filterOption,...Y?z.filterOptionSelected:{}},onClick:()=>y(P.toString()),children:[e.jsx("span",{style:z.checkIcon,children:Y?e.jsx(te,{size:16}):e.jsx(re,{size:16})}),e.jsx("span",{style:z.filterLabel,children:P})]},P)})]}),document.body)};return e.jsx("tr",{style:z.tableHeader,children:o.map(r=>e.jsxs("th",{style:{...z.tableHeaderCell,...K===r.key?z.tableHeaderCellHover:{},position:"relative",...r.key==="name"?{width:"auto",minWidth:"0"}:{},...r.key==="tier"?{width:"40px",minWidth:"40px",maxWidth:"40px"}:{},...r.key==="type"?{width:"80px",minWidth:"80px",maxWidth:"80px"}:{},...r.key==="difficulty"?{width:"40px",minWidth:"40px",maxWidth:"40px"}:{},...r.key==="cost"?{width:"50px",minWidth:"50px",maxWidth:"50px"}:{},...r.key==="action"?{width:"40px",minWidth:"40px",maxWidth:"40px"}:{}},onClick:()=>s(r.key),onMouseEnter:()=>l(r.key),onMouseLeave:()=>l(null),children:[r.hasFilter?e.jsxs("div",{style:z.headerWithFilter,children:[e.jsx("span",{style:{cursor:"pointer"},onClick:d=>{d.stopPropagation(),s(r.key)},children:r.label}),e.jsxs("button",{ref:r.key==="tier"?D:r.key==="type"?F:q,style:{...z.headerFilterIcon,...r.key==="tier"&&B?z.headerFilterIconActive:{},...r.key==="type"&&T?z.headerFilterIconActive:{},...r.key==="cost"&&U?z.headerFilterIconActive:{}},className:"header-filter-icon",onClick:d=>{d.stopPropagation(),r.key==="tier"?(v(!u),k(!1),S(!1)):r.key==="type"?(k(!W),v(!1),S(!1)):r.key==="cost"&&(S(!A),v(!1),k(!1))},children:[e.jsx(Oe,{size:14}),r.key==="tier"&&B||r.key==="type"&&T||r.key==="cost"&&U?e.jsx("span",{style:z.filterActiveDot}):null]})]}):r.label,r.key==="tier"&&n("tier",j,p,g,u,v,D),r.key==="type"&&n("type",m,h,f,W,k,F),r.key==="cost"&&i()]},r.key))})},xt=({item:t,onAdd:s,type:x,onRowClick:j,encounterItems:m=[],pcCount:p=4,playerTier:h=1,remainingBudget:u=0,costFilter:v="auto-grey"})=>{const[W,k]=w.useState(!1),D=()=>{s(t)},F=()=>{if(x!=="adversary")return null;const B=se[t.type]||2;let T=0;const M=m.filter(A=>A.type==="adversary"&&A.item.type==="Solo"&&A.quantity>0).reduce((A,S)=>A+S.quantity,0),L=m.filter(A=>A.type==="adversary"&&["Bruiser","Horde","Leader","Solo"].includes(A.item.type)&&A.quantity>0).reduce((A,S)=>A+S.quantity,0);return t.type==="Solo"&&M===1&&(T+=2),["Bruiser","Horde","Leader","Solo"].includes(t.type)&&L===0&&(T+=1),B+T},f=(()=>{if(x==="adversary"){const B=F();se[t.type];const T=B>u||u<=0;if(v==="auto-hide"&&T)return null;const M=v==="auto-grey"&&T?{opacity:.5,color:"var(--text-secondary)"}:{};return e.jsxs(e.Fragment,{children:[e.jsx("td",{style:{...z.rowCell,width:"auto",minWidth:"0",textAlign:"left",...M},children:t.name}),e.jsx("td",{style:{...z.rowCell,width:"40px",minWidth:"40px",maxWidth:"40px",textAlign:"center",...M},children:t.tier}),e.jsx("td",{style:{...z.rowCell,width:"80px",minWidth:"80px",maxWidth:"80px",textAlign:"center",...M},children:t.type}),e.jsx("td",{style:{...z.rowCell,width:"50px",minWidth:"50px",maxWidth:"50px",textAlign:"center",...M},children:B}),e.jsx("td",{style:{...z.rowCell,width:"40px",minWidth:"40px",maxWidth:"40px",textAlign:"center",...M},children:t.difficulty})]})}else if(x==="environment")return e.jsxs(e.Fragment,{children:[e.jsx("td",{style:{...z.rowCell,width:"auto",minWidth:"0",textAlign:"left"},children:t.name}),e.jsx("td",{style:{...z.rowCell,width:"80px",minWidth:"80px",maxWidth:"80px",textAlign:"center"},children:t.tier}),e.jsx("td",{style:{...z.rowCell,width:"100px",minWidth:"100px",maxWidth:"100px",textAlign:"center"},children:t.type}),e.jsx("td",{style:{...z.rowCell,width:"40px",minWidth:"40px",maxWidth:"40px",textAlign:"center"},children:t.difficulty})]});return null})();return f===null?null:e.jsx(e.Fragment,{children:e.jsxs("tr",{style:{...z.row,...W?z.rowHover:{}},onClick:()=>j&&j(t,x),onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1),children:[f,e.jsx("td",{style:{width:"40px",minWidth:"40px",maxWidth:"40px",textAlign:"center",padding:"0",margin:"0",border:"none",verticalAlign:"middle",boxSizing:"border-box",overflow:"visible",textOverflow:"unset",whiteSpace:"nowrap"},children:e.jsx("button",{style:z.addButton,onClick:B=>{B.stopPropagation(),D()},onMouseEnter:B=>{B.target.style.background="var(--bg-secondary)"},onMouseLeave:B=>{B.target.style.background="var(--purple)"},children:"+"})})]})})},ut=({type:t,onAddItem:s,onCancel:x,onRowClick:j,encounterItems:m=[],pcCount:p=4,playerTier:h=1})=>{const[u,v]=w.useState("all"),[W,k]=w.useState(!1),D=w.useRef(null),{searchTerm:F,setSearchTerm:g,sortFields:f,handleSort:B,filteredAndSortedData:T,loading:M,selectedTiers:L,selectedTypes:A,showTierDropdown:S,setShowTierDropdown:q,showTypeDropdown:N,setShowTypeDropdown:U,tierFilterRef:K,typeFilterRef:l,uniqueTiers:a,uniqueTypes:o,handleTierSelect:i,handleTypeSelect:n,isTierFiltered:r,isTypeFiltered:d,getDropdownStyle:c}=dt(t,m,p,h),C=(()=>{const H=3*p+2,R=m.reduce((E,G)=>{if(G.type==="adversary"){const J=se[G.item.type]||2;if(G.item.type==="Minion"){const ue=Math.ceil(G.quantity/p);return E+ue*J}else return E+G.quantity*J}return E},0);let P=0;m.filter(E=>E.type==="adversary"&&E.item.type==="Solo"&&E.quantity>0).reduce((E,G)=>E+G.quantity,0)>=2&&(P+=be.twoOrMoreSolos);const b=m.some(E=>E.type==="adversary"&&E.item.type==="Bruiser"&&E.quantity>0),V=m.some(E=>E.type==="adversary"&&E.item.type==="Horde"&&E.quantity>0),O=m.some(E=>E.type==="adversary"&&E.item.type==="Leader"&&E.quantity>0),_=m.some(E=>E.type==="adversary"&&E.item.type==="Solo"&&E.quantity>0);return!b&&!V&&!O&&!_&&(P+=be.noBruisersHordesLeadersSolos),H+P-R})(),I=H=>{v(H),k(!1)},$=u!=="all";return M?e.jsx("div",{style:z.browser,children:e.jsx("div",{style:z.loading,children:"Loading..."})}):e.jsxs("div",{style:z.browserWrapper,children:[e.jsx(ct,{searchTerm:F,onSearchChange:g,type:t}),e.jsx("div",{className:"browser-content",style:z.browserContent,children:e.jsxs("table",{style:z.browserTable,children:[e.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,backgroundColor:"var(--bg-primary)"},children:e.jsx(pt,{sortFields:f,onSort:B,type:t,uniqueTiers:a,uniqueTypes:o,selectedTiers:L,selectedTypes:A,showTierDropdown:S,setShowTierDropdown:q,showTypeDropdown:N,setShowTypeDropdown:U,tierFilterRef:K,typeFilterRef:l,handleTierSelect:i,handleTypeSelect:n,isTierFiltered:r,isTypeFiltered:d,getDropdownStyle:c,costFilter:u,showCostDropdown:W,setShowCostDropdown:k,costFilterRef:D,handleCostFilterSelect:I,isCostFiltered:$})}),e.jsx("tbody",{children:T.map(H=>e.jsx(xt,{item:H,onAdd:s,type:t,onRowClick:j,encounterItems:m,pcCount:p,playerTier:h,remainingBudget:C,costFilter:u},H.id))})]})})]})},z={browserWrapper:{display:"flex",flexDirection:"column",background:"var(--bg-primary)",borderRadius:"var(--radius-md)",border:"1px solid var(--border)",overflow:"hidden",height:"100%",width:"100%",position:"relative"},browserContent:{flex:1,overflowY:"auto",overflowX:"visible",padding:0,width:"100%"},tableHeaderContainer:{flexShrink:0,position:"sticky",top:0,zIndex:15,backgroundColor:"var(--bg-secondary)"},browserTable:{width:"100%",minWidth:"100%",borderCollapse:"collapse",tableLayout:"fixed",background:"var(--bg-primary)",margin:0},browserHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",borderBottom:"1px solid var(--border)",backgroundColor:"var(--gray-900)",flexShrink:0,position:"sticky",top:0,zIndex:20},browserTitle:{margin:0,color:"var(--text-primary)",fontSize:"18px",fontWeight:"600"},closeButton:{background:"none",border:"none",color:"var(--text-primary)",fontSize:"24px",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"background-color 0.2s"},searchInput:{flex:1,padding:"8px 12px",border:"1px solid var(--border)",borderRadius:"4px",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",fontSize:"14px",marginRight:"12px",transition:"all 0.2s ease"},searchInputFocus:{outline:"none",borderColor:"var(--purple)",boxShadow:"0 0 0 3px rgba(139, 92, 246, 0.1)"},tableHeader:{background:"var(--gray-900)",borderBottom:"1px solid var(--border)",boxShadow:"0 1px 0 var(--border)",position:"sticky",top:"0",zIndex:10},tableHeaderCell:{backgroundColor:"var(--gray-900)",fontWeight:"700",borderBottom:"1px solid var(--border)",cursor:"pointer",userSelect:"none",minWidth:"100px",whiteSpace:"nowrap",padding:"4px 4px",color:"var(--text-primary)",textShadow:"0 1px 2px rgba(0, 0, 0, 0.3)",boxShadow:"0 1px 0 var(--border)",transition:"background-color 0.2s",position:"sticky",top:"0",zIndex:10},tableHeaderCellHover:{backgroundColor:"var(--bg-hover)"},sortIndicator:{fontSize:"12px",color:"var(--text-secondary)"},tableBody:{flex:1,overflowY:"auto",padding:"8px",backgroundColor:"var(--bg-primary)"},row:{height:"35px",borderBottom:"1px solid var(--border)",transition:"background-color 0.2s ease",cursor:"pointer",backgroundColor:"var(--gray-900)"},rowHover:{backgroundColor:"var(--bg-secondary)"},expandedRow:{backgroundColor:"var(--bg-secondary)"},rowCell:{padding:"4px 4px",verticalAlign:"middle",color:"var(--text-primary)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",borderBottom:"1px solid var(--border)"},rowCellName:{fontWeight:"500",minWidth:"150px"},rowCellCenter:{textAlign:"center",justifyContent:"center",minWidth:"80px"},rowActions:{width:"80px",textAlign:"center",padding:"4px 8px",borderBottom:"1px solid var(--border)"},addButton:{width:"2rem",height:"2rem",border:"1px solid var(--purple)",borderRadius:"var(--radius-sm)",background:"var(--purple)",color:"white",cursor:"pointer",transition:"all 0.2s ease",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"16px",fontWeight:"500"},expandedContent:{padding:"0",backgroundColor:"var(--bg-secondary)",borderBottom:"1px solid var(--border)"},columnName:{width:"auto",minWidth:"0",overflow:"hidden",textOverflow:"ellipsis",paddingLeft:"8px",textAlign:"left"},columnTier:{width:"80px",textAlign:"center",overflow:"visible",textOverflow:"unset"},columnType:{width:"100px",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center"},columnDifficulty:{width:"40px",textAlign:"center",overflow:"visible",textOverflow:"unset"},columnAction:{width:"32px",minWidth:"24px",maxWidth:"24px",textAlign:"center",padding:"0",margin:"0",border:"none",verticalAlign:"middle",color:"var(--text-primary)",whiteSpace:"nowrap",overflow:"visible",textOverflow:"unset"},loading:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px",color:"var(--text-primary)",fontSize:"16px"},mobileBrowser:{width:"95vw",height:"90vh",maxWidth:"none"},mobileSearchInput:{fontSize:"16px"},headerWithFilter:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0px",position:"relative"},headerFilterIcon:{background:"none",border:"none",color:"var(--text-secondary)",cursor:"pointer",padding:"2px 4px",borderRadius:"var(--radius-sm)",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",position:"relative",marginLeft:"-2px"},headerFilterIconActive:{color:"var(--purple)"},filterIcon:{fontSize:"12px"},filterActiveDot:{position:"absolute",left:"50%",top:"2px",transform:"translateX(-50%)",width:"4px",height:"4px",borderRadius:"50%",background:"var(--purple)",pointerEvents:"none"},filterDropdown:{position:"fixed",background:"var(--bg-secondary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.25)",zIndex:99999,marginTop:"4px",overflow:"hidden",width:"max-content",minWidth:"120px",maxWidth:"200px"},filterOption:{padding:"8px 12px",cursor:"pointer",color:"var(--text-primary)",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px",borderBottom:"1px solid rgba(255,255,255,0.06)",transition:"background-color 0.2s ease",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},filterOptionSelected:{backgroundColor:"var(--bg-hover)"},checkIcon:{width:"16px",height:"16px",display:"inline-flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",fontSize:"12px"},filterLabel:{flex:1}},ht=()=>e.jsx("div",{className:"pwa-install-prompt",style:{}}),gt=({side:t="left",children:s,className:x="",style:j={}})=>{const m=t==="left",p={flex:1,minWidth:0,background:"var(--bg-primary)",overflowY:"auto",overflowX:m?"auto":"hidden",display:m?"block":"flex",flexDirection:m?"initial":"column",height:"100%",padding:m?"8px 0 8px 0":"0 8px 0 0",...j};return e.jsx("div",{className:x,style:p,children:s})},je=t=>3*t+2,we={Minion:1,Social:1,Support:1,Horde:2,Ranged:2,Skulk:2,Standard:2,Leader:3,Bruiser:4,Solo:5},ce={lessDifficult:-1,twoOrMoreSolos:-2,increasedDamage:-2,lowerTierAdversary:1,noBruisersHordesLeadersSolos:1,moreDangerous:2},yt=({isOpen:t,onClose:s,onAddAdversary:x,onAddAdversariesBulk:j,onAddEnvironment:m,adversaries:p=[],environments:h=[]})=>{const[u,v]=w.useState(4),[W,k]=w.useState(1),[D,F]=w.useState({lessDifficult:!1,increasedDamage:!1,moreDangerous:!1}),[g,f]=w.useState([]),B=ee.useRef(u);ee.useEffect(()=>{if(t&&p.length>0){const l={};p.forEach(o=>{var n;const i=o.baseName||((n=o.name)==null?void 0:n.replace(/\s+\(\d+\)$/,""))||o.name;l[i]||(l[i]={type:"adversary",item:o,quantity:0}),l[i].quantity+=1});const a=Object.values(l);f(a)}else t&&p.length===0&&f([])},[t,p]);const T=ee.useMemo(()=>{let l=0;g.filter(d=>d.type==="adversary"&&d.item.type==="Solo"&&d.quantity>0).reduce((d,c)=>d+c.quantity,0)>=2&&(l+=ce.twoOrMoreSolos);const o=g.some(d=>d.type==="adversary"&&d.item.type==="Bruiser"&&d.quantity>0),i=g.some(d=>d.type==="adversary"&&d.item.type==="Horde"&&d.quantity>0),n=g.some(d=>d.type==="adversary"&&d.item.type==="Leader"&&d.quantity>0),r=g.some(d=>d.type==="adversary"&&d.item.type==="Solo"&&d.quantity>0);return!o&&!i&&!n&&!r&&(l+=ce.noBruisersHordesLeadersSolos),l},[g,W]),M=je(u),L=Object.entries(D).filter(([l,a])=>a).reduce((l,[a,o])=>l+ce[a],0),A=M+L+T,S=g.reduce((l,a)=>{if(a.type==="adversary"){const o=we[a.item.type]||2;return a.item.type==="Minion"?l+Math.ceil(a.quantity/u)*o:l+o*a.quantity}return l},0),q=A-S;ee.useEffect(()=>{const l=B.current;l!==u&&(f(a=>a.map(o=>{if(o.type==="adversary"&&o.item.type==="Minion"){const n=Math.ceil(o.quantity/l)*u;return{...o,quantity:n}}return o})),B.current=u)},[u]);const N=(l,a)=>{const o=g.findIndex(n=>n.item.id===l.id&&n.type===a),i=l.type==="Minion"?u:1;o>=0?f(n=>n.map((r,d)=>d===o?{...r,quantity:r.quantity+i}:r)):f(n=>[...n,{item:l,type:a,quantity:i}])},U=(l,a)=>{f(o=>{const i=o.findIndex(n=>n.item.id===l&&n.type===a);if(i>=0){const n=o[i],r=n.item.type==="Minion"?u:1;return n.quantity>0?o.map((d,c)=>c===i?{...d,quantity:Math.max(0,d.quantity-r)}:d):o.filter((d,c)=>c!==i)}return o})},K=()=>{const l=[];g.forEach(a=>{for(let o=0;o<a.quantity;o++)a.type==="adversary"&&l.push(a.item)}),l.length>0&&j(l),f([]),s()};return t?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:"80px",backgroundColor:"rgba(0, 0, 0, 0.8)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},children:e.jsxs("div",{style:{backgroundColor:"var(--bg-primary)",border:"2px solid var(--border)",borderRadius:"12px",width:"100%",maxWidth:"1200px",height:"90vh",display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",borderBottom:"1px solid var(--border)",backgroundColor:"var(--bg-secondary)",flexShrink:0},children:[e.jsx("h2",{style:{margin:0,color:"var(--text-primary)",fontSize:"1.5rem",fontWeight:600},children:"Encounter Builder"}),e.jsx("button",{onClick:s,style:{background:"none",border:"none",color:"var(--text-primary)",fontSize:"1.5rem",cursor:"pointer",padding:"0.5rem",borderRadius:"var(--radius-sm)",transition:"background-color 0.2s"},onMouseEnter:l=>l.target.style.backgroundColor="var(--bg-hover)",onMouseLeave:l=>l.target.style.backgroundColor="transparent",title:"Close Encounter Builder",children:e.jsx(oe,{size:24})})]}),e.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:e.jsx("div",{style:{flex:1,overflowY:"auto"},children:e.jsx(ut,{type:"adversary",onAddItem:l=>N(l,"adversary"),onCancel:s,encounterItems:g,pcCount:u,playerTier:W})})}),e.jsx("div",{style:{width:"350px",borderLeft:"1px solid var(--border)",display:"flex",flexDirection:"column",backgroundColor:"var(--bg-secondary)"},children:e.jsx("div",{style:{padding:"1rem",overflowY:"auto"},children:e.jsxs("div",{style:{background:"var(--bg-primary)",borderRadius:"8px",border:"1px solid var(--border)",padding:"1rem"},children:[e.jsx("h4",{style:{margin:"0 0 1rem 0",color:"var(--text-primary)",fontSize:"1rem",textAlign:"center"},children:"Encounter Balance"}),e.jsxs("div",{style:{marginBottom:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"0.25rem 0",borderBottom:"1px solid var(--border)"},children:[e.jsx("div",{style:{flex:1},children:e.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Party Tier"})}),e.jsxs("div",{style:{width:"60px",textAlign:"center",position:"relative"},children:[e.jsx("button",{onClick:()=>k(Math.max(1,W-1)),style:{background:"var(--bg-secondary)",border:"1px solid var(--border)",color:"var(--text-primary)",borderRadius:"3px",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"18px",height:"18px",fontSize:"0.7rem",position:"absolute",left:"0",top:"50%",transform:"translateY(-50%)"},children:e.jsx(le,{size:10})}),e.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:W}),e.jsx("button",{onClick:()=>k(Math.min(4,W+1)),style:{background:"var(--bg-secondary)",border:"1px solid var(--border)",color:"var(--text-primary)",borderRadius:"3px",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"18px",height:"18px",fontSize:"0.7rem",position:"absolute",right:"0",top:"50%",transform:"translateY(-50%)"},children:e.jsx(de,{size:10})})]}),e.jsx("div",{style:{width:"35px",textAlign:"right"},children:e.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"}})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"0.25rem 0",borderBottom:"1px solid var(--border)"},children:[e.jsx("div",{style:{flex:1},children:e.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Party Size"})}),e.jsxs("div",{style:{width:"60px",textAlign:"center",position:"relative"},children:[e.jsx("button",{onClick:()=>v(Math.max(1,u-1)),style:{background:"var(--bg-secondary)",border:"1px solid var(--border)",color:"var(--text-primary)",borderRadius:"3px",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"18px",height:"18px",fontSize:"0.7rem",position:"absolute",left:"0",top:"50%",transform:"translateY(-50%)"},children:e.jsx(le,{size:10})}),e.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:u}),e.jsx("button",{onClick:()=>v(u+1),style:{background:"var(--bg-secondary)",border:"1px solid var(--border)",color:"var(--text-primary)",borderRadius:"3px",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"18px",height:"18px",fontSize:"0.7rem",position:"absolute",right:"0",top:"50%",transform:"translateY(-50%)"},children:e.jsx(de,{size:10})})]}),e.jsx("div",{style:{width:"35px",textAlign:"right"},children:e.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:je(u)})})]}),g.map(l=>{var i;if(l.type!=="adversary")return null;const a=we[l.item.type]||2,o=l.item.type==="Minion"?Math.ceil(l.quantity/u)*a:a*l.quantity;return e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"0.25rem 0",borderBottom:"1px solid var(--border)"},children:[e.jsx("div",{style:{flex:1},children:e.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:l.item.baseName||((i=l.item.name)==null?void 0:i.replace(/\s+\(\d+\)$/,""))||l.item.name})}),e.jsxs("div",{style:{width:"60px",textAlign:"center",position:"relative"},children:[e.jsx("button",{onClick:()=>U(l.item.id,l.type),style:{background:l.quantity===0?"var(--danger)":"var(--bg-secondary)",border:l.quantity===0?"none":"1px solid var(--border)",color:l.quantity===0?"white":"var(--text-primary)",borderRadius:"3px",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"18px",height:"18px",fontSize:"0.7rem",position:"absolute",left:"0",top:"50%",transform:"translateY(-50%)"},children:l.quantity===0?e.jsx(oe,{size:10}):e.jsx(le,{size:10})}),e.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:l.quantity}),e.jsx("button",{onClick:()=>N(l.item,l.type),style:{background:"var(--bg-secondary)",border:"1px solid var(--border)",color:"var(--text-primary)",borderRadius:"3px",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"18px",height:"18px",fontSize:"0.7rem",position:"absolute",right:"0",top:"50%",transform:"translateY(-50%)"},children:e.jsx(de,{size:10})})]}),e.jsx("div",{style:{width:"35px",textAlign:"right"},children:e.jsxs("span",{style:{color:"var(--text-primary)",fontWeight:600},children:["-",o]})})]},`${l.item.id}-${l.type}`)}),T!==0&&(()=>{const l=[];return g.filter(a=>a.type==="adversary"&&a.item.type==="Solo"&&a.quantity>0).reduce((a,o)=>a+o.quantity,0)>=2&&l.push("2+ Solo"),g.some(a=>a.type==="adversary"&&["Bruiser","Horde","Leader","Solo"].includes(a.item.type)&&a.quantity>0)||l.push("no major threats"),e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"0.25rem 0",borderBottom:"1px solid var(--border)"},children:[e.jsx("div",{style:{flex:1},children:e.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:l.join(", ")})}),e.jsx("div",{style:{width:"60px",textAlign:"center"}}),e.jsx("div",{style:{width:"35px",textAlign:"right"},children:e.jsx("span",{style:{color:"var(--text-primary)",fontWeight:600},children:T})})]})})()]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"0.125rem 0",borderBottom:"1px solid var(--border)"},children:[e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center"},children:e.jsx("span",{style:{color:"var(--text-primary)",fontSize:"0.9rem"},children:"Remaining Budget"})}),e.jsx("div",{style:{width:"60px",textAlign:"center"}}),e.jsx("div",{style:{width:"35px",textAlign:"right",display:"flex",alignItems:"center",justifyContent:"flex-end"},children:e.jsx("span",{style:{color:q<0?"var(--danger)":"var(--text-primary)",fontWeight:600},children:q})})]})]})})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",padding:"1rem",borderTop:"1px solid var(--border)",backgroundColor:"var(--bg-secondary)"},children:[e.jsx("button",{onClick:s,style:{background:"var(--bg-primary)",border:"1px solid var(--border)",color:"var(--text-primary)",padding:"0.5rem 1rem",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:l=>l.target.style.backgroundColor="var(--bg-hover)",onMouseLeave:l=>l.target.style.backgroundColor="var(--bg-primary)",children:"Cancel"}),e.jsx("button",{onClick:K,disabled:g.length===0,style:{background:g.length===0?"var(--gray-600)":"var(--purple)",border:"none",color:"white",padding:"0.5rem 1rem",borderRadius:"6px",cursor:g.length===0?"not-allowed":"pointer",transition:"all 0.2s",opacity:g.length===0?.6:1},onMouseEnter:l=>{g.length>0&&(l.target.style.backgroundColor="var(--purple-dark)")},onMouseLeave:l=>{g.length>0&&(l.target.style.backgroundColor="var(--purple)")},children:"Create Encounter"})]})]})}):null};class mt extends ee.Component{constructor(s){super(s),this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,x){console.error("ErrorBoundary caught an error:",s,x)}render(){var s;return this.state.hasError?e.jsxs("div",{className:"p-md text-red",children:[e.jsx("h3",{children:"Something went wrong:"}),e.jsx("pre",{children:(s=this.state.error)==null?void 0:s.toString()}),e.jsx("button",{className:"btn-base btn-text",onClick:()=>this.setState({hasError:!1,error:null}),children:"Try again"})]}):this.props.children}}const ft=()=>{const{adversaries:t,environments:s,countdowns:x,fear:j,updateFear:m,createAdversary:p,createAdversariesBulk:h,updateAdversary:u,deleteAdversary:v,createEnvironment:W,updateEnvironment:k,deleteEnvironment:D,createCountdown:F,updateCountdown:g,deleteCountdown:f,advanceCountdown:B}=Je(),[T,M]=w.useState(!1),[L,A]=w.useState(!1);w.useState(!1);const[S,q]=w.useState(!1);w.useState(!0);const[N,U]=w.useState(null),[K,l]=w.useState(0),[a,o]=w.useState(0),[i,n]=w.useState(!1);w.useEffect(()=>{const b=()=>{const O=window.matchMedia("(max-width: 800px)");M(O.matches)};b();const V=window.matchMedia("(max-width: 800px)");return V.addEventListener("change",b),()=>V.removeEventListener("change",b)},[]);const r=12,d=250,c=500,y=b=>{if(b<=0)return{visibleColumns:1,columnWidth:d};const V=r*2,O=b-V;let _={visibleColumns:1,columnWidth:Math.min(O,c)};for(let E=1;E<=5;E++){const G=(E-1)*r,J=(O-G)/E;J>=d&&J<=c&&E*J+G<=O&&E>_.visibleColumns&&(_={visibleColumns:E,columnWidth:J})}return _.visibleColumns*_.columnWidth+(_.visibleColumns-1)*r>O&&(_={visibleColumns:1,columnWidth:Math.min(O,c)}),_},{visibleColumns:C,columnWidth:I}=y(K);w.useEffect(()=>{const b=()=>{l(window.innerWidth)};return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]);const $=()=>{A(!0)},H=w.useCallback(()=>{A(!1)},[]),R=w.useCallback(b=>{o(b.target.scrollLeft)},[]);w.useCallback(()=>{n(!0)},[]),w.useCallback(()=>{setTimeout(()=>n(!1),100)},[]);const Y=(()=>{const b={};return t.forEach(V=>{var _;const O=V.baseName||((_=V.name)==null?void 0:_.replace(/\s+\(\d+\)$/,""))||V.name;b[O]||(b[O]={type:"adversary",baseName:O,instances:[]}),b[O].instances.push(V)}),s.forEach(V=>{b[V.name]||(b[V.name]={type:"environment",baseName:V.name,instances:[]}),b[V.name].instances.push(V)}),x.forEach(V=>{b[`countdown-${V.id}`]={type:"countdown",baseName:V.name,instances:[V]}}),Object.values(b)})();return Y.length,e.jsxs("div",{className:"app",onClick:b=>{b.target,b.currentTarget},children:[e.jsx(rt,{adversaries:t,environments:s,countdowns:x,deleteAdversary:v,deleteEnvironment:D,deleteCountdown:f,isClearMode:S,setIsClearMode:q,sortAdversaries:()=>{},onOpenDatabase:$}),e.jsx("div",{className:"main-content",style:{position:"relative",width:"100%"},children:e.jsx("div",{className:"dashboard-scroll-container",style:{display:"flex",flexDirection:"row",overflowX:"auto",overflowY:"hidden",padding:`0 ${r}px`,scrollSnapType:"x mandatory",height:"100%",width:"100%"},onScroll:R,children:Y.length===0?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%",padding:"2rem"},children:e.jsx("button",{onClick:$,style:{backgroundColor:"transparent",color:"var(--text-secondary)",border:"2px dashed var(--border)",borderRadius:"var(--radius-md)",padding:"1rem 2rem",fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:b=>{b.target.style.borderColor="var(--purple)",b.target.style.color="var(--purple)"},onMouseLeave:b=>{b.target.style.borderColor="var(--border)",b.target.style.color="var(--text-secondary)"},children:"Create Encounter"})}):Y.map((b,V)=>e.jsx(gt,{className:"invisible-scrollbar",style:{width:`${I+r}px`,flexShrink:0,flexGrow:0,flex:"none",paddingLeft:`${r}px`,paddingRight:"0",paddingTop:`${r}px`,paddingBottom:`${r}px`,scrollSnapAlign:"start",overflowY:"auto",overflowX:"hidden"},children:e.jsx(st,{type:b.type,item:{...b.instances[0],name:b.baseName,hp:0,stress:0,isDead:!1},mode:"expanded",instances:b.instances,onApplyDamage:b.type==="adversary"?(O,_,Z,E)=>{const G=b.instances.find(J=>J.id===O);G&&u(O,{hp:Math.min(G.hpMax||1,(G.hp||0)+_)})}:void 0,onApplyHealing:b.type==="adversary"?(O,_,Z)=>{const E=b.instances.find(G=>G.id===O);E&&u(O,{hp:Math.max(0,(E.hp||0)-_)})}:void 0,onApplyStressChange:b.type==="adversary"?(O,_)=>{var Z,E;return u(O,{stress:Math.max(0,Math.min(((Z=b.instances.find(G=>G.id===O))==null?void 0:Z.stressMax)||6,(((E=b.instances.find(G=>G.id===O))==null?void 0:E.stress)||0)+_))})}:void 0,onUpdate:b.type==="adversary"?u:b.type==="environment"?k:g,adversaries:t})},`${b.type}-${b.baseName}`))})}),e.jsx(nt,{position:"bottom",children:e.jsx(Qe,{type:"fear",value:(j==null?void 0:j.value)||0,maxValue:12,onChange:m,showTooltip:!1,enableBoundaryClick:!0,clickContainerWidth:"100%",centerPips:!0})}),e.jsx(yt,{isOpen:L,onClose:H,onAddAdversary:b=>{p(b),U("adversary")},onAddAdversariesBulk:b=>{h(b),U("adversary")},onAddEnvironment:b=>{W(b),U("environment")},adversaries:t,environments:s}),e.jsx(ht,{})]})},vt=()=>e.jsx(mt,{children:e.jsx(ft,{})});xe.createRoot(document.getElementById("root")).render(e.jsx(ee.StrictMode,{children:e.jsx(Ke,{children:e.jsx(vt,{})})}));
